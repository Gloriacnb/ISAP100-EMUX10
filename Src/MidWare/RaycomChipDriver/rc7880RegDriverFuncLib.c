
#include <string.h>
#include <rtl.h>
#include "rc7880RegDriverfuncLib.h"

OS_MUT mut_7880;

extern BYTE gVc4OhJ0Send[2];
extern BYTE gVc4OhJ0Expect[2];
extern BYTE gVc4OhJ1Send[2];
extern BYTE gVc4OhJ1Expect[2];

const BYTE crc7_syndrome_table[256] = { 0x00, 0x09, 0x12, 0x1b, 0x24, 0x2d,
		0x36, 0x3f, 0x48, 0x41, 0x5a, 0x53, 0x6c, 0x65, 0x7e, 0x77, 0x19, 0x10,
		0x0b, 0x02, 0x3d, 0x34, 0x2f, 0x26, 0x51, 0x58, 0x43, 0x4a, 0x75, 0x7c,
		0x67, 0x6e, 0x32, 0x3b, 0x20, 0x29, 0x16, 0x1f, 0x04, 0x0d, 0x7a, 0x73,
		0x68, 0x61, 0x5e, 0x57, 0x4c, 0x45, 0x2b, 0x22, 0x39, 0x30, 0x0f, 0x06,
		0x1d, 0x14, 0x63, 0x6a, 0x71, 0x78, 0x47, 0x4e, 0x55, 0x5c, 0x64, 0x6d,
		0x76, 0x7f, 0x40, 0x49, 0x52, 0x5b, 0x2c, 0x25, 0x3e, 0x37, 0x08, 0x01,
		0x1a, 0x13, 0x7d, 0x74, 0x6f, 0x66, 0x59, 0x50, 0x4b, 0x42, 0x35, 0x3c,
		0x27, 0x2e, 0x11, 0x18, 0x03, 0x0a, 0x56, 0x5f, 0x44, 0x4d, 0x72, 0x7b,
		0x60, 0x69, 0x1e, 0x17, 0x0c, 0x05, 0x3a, 0x33, 0x28, 0x21, 0x4f, 0x46,
		0x5d, 0x54, 0x6b, 0x62, 0x79, 0x70, 0x07, 0x0e, 0x15, 0x1c, 0x23, 0x2a,
		0x31, 0x38, 0x41, 0x48, 0x53, 0x5a, 0x65, 0x6c, 0x77, 0x7e, 0x09, 0x00,
		0x1b, 0x12, 0x2d, 0x24, 0x3f, 0x36, 0x58, 0x51, 0x4a, 0x43, 0x7c, 0x75,
		0x6e, 0x67, 0x10, 0x19, 0x02, 0x0b, 0x34, 0x3d, 0x26, 0x2f, 0x73, 0x7a,
		0x61, 0x68, 0x57, 0x5e, 0x45, 0x4c, 0x3b, 0x32, 0x29, 0x20, 0x1f, 0x16,
		0x0d, 0x04, 0x6a, 0x63, 0x78, 0x71, 0x4e, 0x47, 0x5c, 0x55, 0x22, 0x2b,
		0x30, 0x39, 0x06, 0x0f, 0x14, 0x1d, 0x25, 0x2c, 0x37, 0x3e, 0x01, 0x08,
		0x13, 0x1a, 0x6d, 0x64, 0x7f, 0x76, 0x49, 0x40, 0x5b, 0x52, 0x3c, 0x35,
		0x2e, 0x27, 0x18, 0x11, 0x0a, 0x03, 0x74, 0x7d, 0x66, 0x6f, 0x50, 0x59,
		0x42, 0x4b, 0x17, 0x1e, 0x05, 0x0c, 0x33, 0x3a, 0x21, 0x28, 0x5f, 0x56,
		0x4d, 0x44, 0x7b, 0x72, 0x69, 0x60, 0x0e, 0x07, 0x1c, 0x15, 0x2a, 0x23,
		0x38, 0x31, 0x46, 0x4f, 0x54, 0x5d, 0x62, 0x6b, 0x70, 0x79 };

int writeRegByte(WORD addr, BYTE data) {

	BYTE temp;
	BYTE tempData;

	for (temp = 0; temp < 10; temp++) {
		tempData = EXTERNAL_IO_BYTE[addr];
		if (tempData != data) {
			EXTERNAL_IO_BYTE[addr] = data;
		} else {
			return RC7880_OK;
		}
	}
	return RC7880_ERROR;
}

int writeRc7880RegLock(void) {
	WORD regAddr;
	BYTE setData = 0;

	regAddr = RC7880_ADDR + RC7880REG_GLOBAL_WRITELOCK;
	setData = 0;
	if (writeRegByte(regAddr, setData) == RC7880_ERROR) {
		return RC7880_ERROR;
	}
	return RC7880_OK;
}

int writeRc7880RegUnlock(void) {
	WORD regAddr;
	BYTE setData = 0;

	regAddr = RC7880_ADDR + RC7880REG_GLOBAL_WRITELOCK;
	setData = 0xAA;
	if (writeRegByte(regAddr, setData) == RC7880_ERROR) {
		return RC7880_ERROR;
	}
	return RC7880_OK;
}

int writeRc7880RegByte(WORD addr, BYTE data) {
	BYTE temp;
	BYTE tempData;

	for (temp = 0; temp < 10; temp++) {
		tempData = EXTERNAL_IO_BYTE[addr];
		if (tempData != data) {
			os_mut_wait(mut_7880, 0xffff);
			writeRc7880RegUnlock();
			EXTERNAL_IO_BYTE[addr] = data;
			writeRc7880RegLock();
			os_mut_release(mut_7880);
		} else {
			return RC7880_OK;
		}
	}
	return RC7880_ERROR;
}

BYTE readRc7880RegByte(WORD addr) {
	BYTE data = 0;
	data = (BYTE) (*(BYTE *) (0xE3006000 + addr)); //EXTERNAL_IO_BYTE[addr] ;
	return data;
}

int RC7880GlobalUnitChipInfoRead(WORD *chipIdP, BYTE *chipVersionP) {
	WORD addr;
	BYTE tempData = 0;

	if ((chipIdP == RC7880_NULL) && (chipVersionP == RC7880_NULL)) {
		return RC7880_ERROR;
	}
	if (chipIdP != RC7880_NULL) {
		*chipIdP = 0;
		addr = RC7880_ADDR + RC7880REG_GLOBAL_CHIPID1;
		tempData = readRc7880RegByte(addr);
		*chipIdP |= (tempData << 8);
		addr = RC7880_ADDR + RC7880REG_GLOBAL_CHIPID2;
		tempData = readRc7880RegByte(addr);
		*chipIdP |= tempData;
	}
	if (chipVersionP != RC7880_NULL) {
		*chipVersionP = 0;
		addr = RC7880_ADDR + RC7880REG_GLOBAL_CHIPVERSION;
		tempData = readRc7880RegByte(addr);
		*chipVersionP = tempData;
	}
	return RC7880_OK;
}

int RC7880DrvEOWUnitAddrRead(BYTE *eowAddrP) {
	WORD addr;
	BYTE tempData = 0;

	addr = RC7880_ADDR + RC7880REG_EOW_ADDR;
	tempData = readRc7880RegByte(addr);
	*eowAddrP = tempData;
	return RC7880_OK;
}

int RC7880EOWUnitAlarmToneWrite(BYTE enable) {
	WORD addr;
	BYTE tempData = 0;
	int result;

	addr = RC7880_ADDR + RC7880REG_EOW_TONE;
	tempData = readRc7880RegByte(addr);
	if (enable == TONE_ENABLE) /*tone*/
	{
		tempData |= 0x01;
	} else /*not tone*/
	{
		tempData &= 0xFE;
	}
	result = writeRc7880RegByte(addr, tempData);
	return result;
}

int RC7880EOWUnitUserChannelEnableWrite(BYTE enable) {
	WORD addr;
	BYTE tempData = 0;
	int result;

	addr = RC7880_ADDR + RC7880REG_EOW_USERCHANNEL;
	tempData = readRc7880RegByte(addr);
	if (enable == USERCHANNEL_ENABLE) {
		tempData |= 0x01;
	} else {
		tempData &= 0xFE;
	}
	result = writeRc7880RegByte(addr, tempData);
	return result;
}

int RC7880EOWUnitUserChannelEnableRead(BYTE *enableP) {
	WORD addr;
	BYTE tempData = 0;

	if (enableP == NULL) {
//		logMsg("ERROR : RC7880EOWUnitUserChannelEnableRead enableP == NULL\n" , 0,0,0,0,0,0) ;
		return RC7880_ERROR;
	}
	addr = RC7880_ADDR + RC7880REG_EOW_USERCHANNEL;
	tempData = readRc7880RegByte(addr);

	if ((tempData & 0x01) == 0x01) {
		*enableP = 1;
	} else {
		*enableP = 0;
	}
	return RC7880_OK;
}

int RC7880OHUnitLoopWrite(BYTE startAddr, BYTE endAddr) {
	WORD addr;
	BYTE addrId = 0;
	BYTE tempData = 0;

	for (addrId = startAddr; addrId <= endAddr; addrId++) {
		addr = RC7880_ADDR + RC7880REG_OHDXC_BASE + addrId;
		tempData = addrId;
		if (writeRc7880RegByte(addr, tempData) == RC7880_ERROR) {
			return RC7880_ERROR;
		}
	}
	return RC7880_OK;
}

int RC7880OHUnitOtherDxcWrite(BYTE startAddr, BYTE endAddr, BYTE startSrcAddr) {
	WORD addr;
	WORD addrId = 0;
	BYTE tempData = 0;

	for (addrId = startAddr; addrId <= endAddr; addrId++) {
		addr = RC7880_ADDR + RC7880REG_OHDXC_BASE + addrId;
		tempData = startSrcAddr;
		if (writeRc7880RegByte(addr, tempData) == RC7880_ERROR) {
			return RC7880_ERROR;
		}
		startSrcAddr += 1;
	}
	return RC7880_OK;
}

int RC7880OHUnitDxcWrite(BYTE *regAddrP, BYTE *dataP) {
	WORD addr;
	BYTE tempData = 0;

	addr = RC7880_ADDR + RC7880REG_OHDXC_BASE + regAddrP[0];
	tempData = dataP[0];
	if (writeRc7880RegByte(addr, tempData) == RC7880_ERROR) {
		return RC7880_ERROR;
	}
	addr = RC7880_ADDR + RC7880REG_OHDXC_BASE + regAddrP[1];
	tempData = dataP[1];
	if (writeRc7880RegByte(addr, tempData) == RC7880_ERROR) {
		return RC7880_ERROR;
	}
	addr = RC7880_ADDR + RC7880REG_OHDXC_BASE + regAddrP[2];
	tempData = dataP[2];
	if (writeRc7880RegByte(addr, tempData) == RC7880_ERROR) {
		return RC7880_ERROR;
	}
	addr = RC7880_ADDR + RC7880REG_OHDXC_BASE + regAddrP[3];
	tempData = dataP[3];
	if (writeRc7880RegByte(addr, tempData) == RC7880_ERROR) {
		return RC7880_ERROR;
	}
	addr = RC7880_ADDR + RC7880REG_OHDXC_BASE + regAddrP[4];
	tempData = dataP[4];
	if (writeRc7880RegByte(addr, tempData) == RC7880_ERROR) {
		return RC7880_ERROR;
	}
	return RC7880_OK;
}

int RC7880OHUnitStandardEowDxcWrite(
BYTE srcEow,
BYTE srcAE1,
BYTE srcXe11Ts5,
BYTE srcBE1,
BYTE srcXe12Ts5) {
	BYTE regAddr[5];
	BYTE configData[5];

	regAddr[0] = RC7880REG_EOW_OH;
	configData[0] = srcEow;
	regAddr[1] = RC7880REG_E1_STM8M0A;
	configData[1] = srcAE1;
	regAddr[2] = RC7880REG_TS5_SXE11;
	configData[2] = srcXe11Ts5;
	regAddr[3] = RC7880REG_E1_STM8M0B;
	configData[3] = srcBE1;
	regAddr[4] = RC7880REG_TS5_SXE12;
	configData[4] = srcXe12Ts5;
	if (RC7880OHUnitDxcWrite(regAddr, configData) == RC7880_ERROR) {
		return RC7880_ERROR;
	}
	return RC7880_OK;
}

int RC7880OHUnitStandardD1DxcWrite(
BYTE srcDcc1,
BYTE srcAD1,
BYTE srcXe11Ts2,
BYTE srcBD1,
BYTE srcXe12Ts2) {
	BYTE regAddr[5];
	BYTE configData[5];

	regAddr[0] = RC7880REG_DCC1_ST2M0;
	configData[0] = srcDcc1;
	regAddr[1] = RC7880REG_D1_STM8M0A;
	configData[1] = srcAD1;
	regAddr[2] = RC7880REG_TS2_SXE11;
	configData[2] = srcXe11Ts2;
	regAddr[3] = RC7880REG_D1_STM8M0B;
	configData[3] = srcBD1;
	regAddr[4] = RC7880REG_TS2_SXE12;
	configData[4] = srcXe12Ts2;
	if (RC7880OHUnitDxcWrite(regAddr, configData) == RC7880_ERROR) {
		return RC7880_ERROR;
	}
	return RC7880_OK;
}

int RC7880OHUnitStandardD2DxcWrite(
BYTE srcDcc2,
BYTE srcAD2,
BYTE srcXe11Ts3,
BYTE srcBD2,
BYTE srcXe12Ts3) {
	BYTE regAddr[5];
	BYTE configData[5];

	regAddr[0] = RC7880REG_DCC2_ST2M0;
	configData[0] = srcDcc2;
	regAddr[1] = RC7880REG_D2_STM8M0A;
	configData[1] = srcAD2;
	regAddr[2] = RC7880REG_TS3_SXE11;
	configData[2] = srcXe11Ts3;
	regAddr[3] = RC7880REG_D2_STM8M0B;
	configData[3] = srcBD2;
	regAddr[4] = RC7880REG_TS3_SXE12;
	configData[4] = srcXe12Ts3;
	if (RC7880OHUnitDxcWrite(regAddr, configData) == RC7880_ERROR) {
		return RC7880_ERROR;
	}
	return RC7880_OK;
}

int RC7880OHUnitStandardD3DxcWrite(
BYTE srcDcc3,
BYTE srcAD3,
BYTE srcXe11Ts4,
BYTE srcBD3,
BYTE srcXe12Ts4) {
	BYTE regAddr[5];
	BYTE configData[5];

	regAddr[0] = RC7880REG_DCC3_ST2M0;
	configData[0] = srcDcc3;
	regAddr[1] = RC7880REG_D3_STM8M0A;
	configData[1] = srcAD3;
	regAddr[2] = RC7880REG_TS4_SXE11;
	configData[2] = srcXe11Ts4;
	regAddr[3] = RC7880REG_D3_STM8M0B;
	configData[3] = srcBD3;
	regAddr[4] = RC7880REG_TS4_SXE12;
	configData[4] = srcXe12Ts4;
	if (RC7880OHUnitDxcWrite(regAddr, configData) == RC7880_ERROR) {
		return RC7880_ERROR;
	}
	return RC7880_OK;
}

int RC7880OHUnitStandardF1DxcWrite(
BYTE srcF1,
BYTE srcAF1,
BYTE srcXe11Ts1,
BYTE srcBF1,
BYTE srcXe12Ts1) {
	BYTE regAddr[5];
	BYTE configData[5];

	regAddr[0] = RC7880REG_F1_ST2M0;
	configData[0] = srcF1;
	regAddr[1] = RC7880REG_F1_STM8M0A;
	configData[1] = srcAF1;
	regAddr[2] = RC7880REG_TS1_SXE11;
	configData[2] = srcXe11Ts1;
	regAddr[3] = RC7880REG_F1_STM8M0B;
	configData[3] = srcBF1;
	regAddr[4] = RC7880REG_TS1_SXE12;
	configData[4] = srcXe12Ts1;
	if (RC7880OHUnitDxcWrite(regAddr, configData) == RC7880_ERROR) {
		return RC7880_ERROR;
	}
	return RC7880_OK;
}

int RC7880OHUnitUnstandardEowDxcWrite(
BYTE srcEow,
BYTE srcAD4,
BYTE srcXe11Ts5,
BYTE srcBD4,
BYTE srcXe12Ts5) {
	BYTE regAddr[5];
	BYTE configData[5];

	regAddr[0] = RC7880REG_EOW_OH;
	configData[0] = srcEow;
	regAddr[1] = RC7880REG_D4_STM8M0A;
	configData[1] = srcAD4;
	regAddr[2] = RC7880REG_TS5_SXE11;
	configData[2] = srcXe11Ts5;
	regAddr[3] = RC7880REG_D4_STM8M0B;
	configData[3] = srcBD4;
	regAddr[4] = RC7880REG_TS5_SXE12;
	configData[4] = srcXe12Ts5;
	if (RC7880OHUnitDxcWrite(regAddr, configData) == RC7880_ERROR) {
		return RC7880_ERROR;
	}
	return RC7880_OK;
}

int RC7880OHUnitUnstandardD6DxcWrite(
BYTE srcDcc1,
BYTE srcAD6,
BYTE srcXe11Ts2,
BYTE srcBD6,
BYTE srcXe12Ts2) {
	BYTE regAddr[5];
	BYTE configData[5];

	regAddr[0] = RC7880REG_DCC1_ST2M0;
	configData[0] = srcDcc1;
	regAddr[1] = RC7880REG_D6_STM8M0A;
	configData[1] = srcAD6;
	regAddr[2] = RC7880REG_TS2_SXE11;
	configData[2] = srcXe11Ts2;
	regAddr[3] = RC7880REG_D6_STM8M0B;
	configData[3] = srcBD6;
	regAddr[4] = RC7880REG_TS2_SXE12;
	configData[4] = srcXe12Ts2;
	if (RC7880OHUnitDxcWrite(regAddr, configData) == RC7880_ERROR) {
		return RC7880_ERROR;
	}
	return RC7880_OK;
}

int RC7880OHUnitUnstandardD7DxcWrite(
BYTE srcDcc2,
BYTE srcAD7,
BYTE srcXe11Ts3,
BYTE srcBD7,
BYTE srcXe12Ts3) {
	BYTE regAddr[5];
	BYTE configData[5];

	regAddr[0] = RC7880REG_DCC2_ST2M0;
	configData[0] = srcDcc2;
	regAddr[1] = RC7880REG_D7_STM8M0A;
	configData[1] = srcAD7;
	regAddr[2] = RC7880REG_TS3_SXE11;
	configData[2] = srcXe11Ts3;
	regAddr[3] = RC7880REG_D7_STM8M0B;
	configData[3] = srcBD7;
	regAddr[4] = RC7880REG_TS3_SXE12;
	configData[4] = srcXe12Ts3;
	if (RC7880OHUnitDxcWrite(regAddr, configData) == RC7880_ERROR) {
		return RC7880_ERROR;
	}
	return RC7880_OK;
}

int RC7880OHUnitUnstandardD8DxcWrite(
BYTE srcDcc3,
BYTE srcAD8,
BYTE srcXe11Ts4,
BYTE srcBD8,
BYTE srcXe12Ts4) {
	BYTE regAddr[5];
	BYTE configData[5];

	regAddr[0] = RC7880REG_DCC3_ST2M0;
	configData[0] = srcDcc3;
	regAddr[1] = RC7880REG_D8_STM8M0A;
	configData[1] = srcAD8;
	regAddr[2] = RC7880REG_TS4_SXE11;
	configData[2] = srcXe11Ts4;
	regAddr[3] = RC7880REG_D8_STM8M0B;
	configData[3] = srcBD8;
	regAddr[4] = RC7880REG_TS4_SXE12;
	configData[4] = srcXe12Ts4;
	if (RC7880OHUnitDxcWrite(regAddr, configData) == RC7880_ERROR) {
		return RC7880_ERROR;
	}
	return RC7880_OK;
}

int RC7880OHUnitUnstandardF1DxcWrite(
BYTE srcF1,
BYTE srcAD5,
BYTE srcXe11Ts1,
BYTE srcBD5,
BYTE srcXe12Ts1) {
	BYTE regAddr[5];
	BYTE configData[5];

	regAddr[0] = RC7880REG_F1_ST2M0;
	configData[0] = srcF1;
	regAddr[1] = RC7880REG_D5_STM8M0A;
	configData[1] = srcAD5;
	regAddr[2] = RC7880REG_TS1_SXE11;
	configData[2] = srcXe11Ts1;
	regAddr[3] = RC7880REG_D5_STM8M0B;
	configData[3] = srcBD5;
	regAddr[4] = RC7880REG_TS1_SXE12;
	configData[4] = srcXe12Ts1;
	if (RC7880OHUnitDxcWrite(regAddr, configData) == RC7880_ERROR) {
		return RC7880_ERROR;
	}
	return RC7880_OK;
}

int RC7880OHUnitDxcSelfLoopWrite(void) {
	int result;

	result = RC7880OHUnitOtherDxcWrite(RC7880REG_E1_STM8M0A,
			RC7880REG_END_STM21, RC7880REG_E1_STM8M0A);
	return result;
}

void dccUnstandardModeOhCommFunc(BYTE dccint) {
	switch (dccint) {
	case 0x01: /*A*/
	{
		/*EOW DOWN FROM A  D4  ;  EOW UP TO A ; EOW UP TO X ; EOW UP TO B*/
		RC7880OHUnitUnstandardEowDxcWrite(RC7880REG_D4_STM8M0A,
				RC7880REG_EOW_OH, RC7880REG_TS5_SXE11, RC7880REG_D4_STM8M0B,
				RC7880REG_TS5_SXE12);
		RC7880OHUnitUnstandardD6DxcWrite(RC7880REG_D6_STM8M0A,
				RC7880REG_DCC1_ST2M0, RC7880REG_TS2_SXE11, RC7880REG_D6_STM8M0B,
				RC7880REG_TS2_SXE12);
		RC7880OHUnitUnstandardD7DxcWrite(RC7880REG_D7_STM8M0A,
				RC7880REG_DCC2_ST2M0, RC7880REG_TS3_SXE11, RC7880REG_D7_STM8M0B,
				RC7880REG_TS3_SXE12);
		RC7880OHUnitUnstandardD8DxcWrite(RC7880REG_D8_STM8M0A,
				RC7880REG_DCC3_ST2M0, RC7880REG_TS4_SXE11, RC7880REG_D8_STM8M0B,
				RC7880REG_TS4_SXE12);
		RC7880OHUnitUnstandardF1DxcWrite(RC7880REG_D5_STM8M0A,
				RC7880REG_F1_ST2M0, RC7880REG_TS1_SXE11, RC7880REG_D5_STM8M0B,
				RC7880REG_TS1_SXE12);
		break;
	}
	case 0x02: /*XE1_1*/
	{
		RC7880OHUnitUnstandardEowDxcWrite(RC7880REG_TS5_SXE11,
				RC7880REG_D4_STM8M0A, RC7880REG_EOW_OH, RC7880REG_D4_STM8M0B,
				RC7880REG_TS5_SXE12);
		RC7880OHUnitUnstandardD6DxcWrite(RC7880REG_TS2_SXE11,
				RC7880REG_D6_STM8M0A, RC7880REG_DCC1_ST2M0,
				RC7880REG_D6_STM8M0B, RC7880REG_TS2_SXE12);
		RC7880OHUnitUnstandardD7DxcWrite(RC7880REG_TS3_SXE11,
				RC7880REG_D7_STM8M0A, RC7880REG_DCC2_ST2M0,
				RC7880REG_D7_STM8M0B, RC7880REG_TS3_SXE12);
		RC7880OHUnitUnstandardD8DxcWrite(RC7880REG_TS4_SXE11,
				RC7880REG_D8_STM8M0A, RC7880REG_DCC3_ST2M0,
				RC7880REG_D8_STM8M0B, RC7880REG_TS4_SXE12);
		RC7880OHUnitUnstandardF1DxcWrite(RC7880REG_TS1_SXE11,
				RC7880REG_D5_STM8M0A, RC7880REG_F1_ST2M0, RC7880REG_D5_STM8M0B,
				RC7880REG_TS1_SXE12);
		break;
	}
	case 0x04: /*B*/
	{
		RC7880OHUnitUnstandardEowDxcWrite(RC7880REG_D4_STM8M0B,
				RC7880REG_D4_STM8M0A, RC7880REG_TS5_SXE11, RC7880REG_EOW_OH,
				RC7880REG_TS5_SXE12);
		RC7880OHUnitUnstandardD6DxcWrite(RC7880REG_D6_STM8M0B,
				RC7880REG_D6_STM8M0A, RC7880REG_TS2_SXE11, RC7880REG_DCC1_ST2M0,
				RC7880REG_TS2_SXE12);
		RC7880OHUnitUnstandardD7DxcWrite(RC7880REG_D7_STM8M0B,
				RC7880REG_D7_STM8M0A, RC7880REG_TS3_SXE11, RC7880REG_DCC2_ST2M0,
				RC7880REG_TS3_SXE12);
		RC7880OHUnitUnstandardD8DxcWrite(RC7880REG_D8_STM8M0B,
				RC7880REG_D8_STM8M0A, RC7880REG_TS4_SXE11, RC7880REG_DCC3_ST2M0,
				RC7880REG_TS4_SXE12);
		RC7880OHUnitUnstandardF1DxcWrite(RC7880REG_D5_STM8M0B,
				RC7880REG_D5_STM8M0A, RC7880REG_TS1_SXE11, RC7880REG_F1_ST2M0,
				RC7880REG_TS1_SXE12);
		break;
	}
	case 0x08: /*XE1_2*/
	{
		RC7880OHUnitUnstandardEowDxcWrite(RC7880REG_TS5_SXE12,
				RC7880REG_D4_STM8M0A, RC7880REG_TS5_SXE11, RC7880REG_D4_STM8M0B,
				RC7880REG_EOW_OH);
		RC7880OHUnitUnstandardD6DxcWrite(RC7880REG_TS2_SXE12,
				RC7880REG_D6_STM8M0A, RC7880REG_TS2_SXE11, RC7880REG_D6_STM8M0B,
				RC7880REG_DCC1_ST2M0);
		RC7880OHUnitUnstandardD7DxcWrite(RC7880REG_TS3_SXE12,
				RC7880REG_D7_STM8M0A, RC7880REG_TS3_SXE11, RC7880REG_D7_STM8M0B,
				RC7880REG_DCC2_ST2M0);
		RC7880OHUnitUnstandardD8DxcWrite(RC7880REG_TS4_SXE12,
				RC7880REG_D8_STM8M0A, RC7880REG_TS4_SXE11, RC7880REG_D8_STM8M0B,
				RC7880REG_DCC3_ST2M0);
		RC7880OHUnitUnstandardF1DxcWrite(RC7880REG_TS1_SXE12,
				RC7880REG_D5_STM8M0A, RC7880REG_TS1_SXE11, RC7880REG_D5_STM8M0B,
				RC7880REG_F1_ST2M0);
		break;
	}
	case 0x03: /*A & XE11  */
	{
		RC7880OHUnitUnstandardEowDxcWrite(RC7880REG_D4_STM8M0A,
				RC7880REG_TS5_SXE11, RC7880REG_EOW_OH, RC7880REG_D4_STM8M0B,
				RC7880REG_TS5_SXE12);
		RC7880OHUnitUnstandardD6DxcWrite(RC7880REG_D6_STM8M0A,
				RC7880REG_TS2_SXE11, RC7880REG_DCC1_ST2M0, RC7880REG_D6_STM8M0B,
				RC7880REG_TS2_SXE12);
		RC7880OHUnitUnstandardD7DxcWrite(RC7880REG_D7_STM8M0A,
				RC7880REG_TS3_SXE11, RC7880REG_DCC2_ST2M0, RC7880REG_D7_STM8M0B,
				RC7880REG_TS3_SXE12);
		RC7880OHUnitUnstandardD8DxcWrite(RC7880REG_D8_STM8M0A,
				RC7880REG_TS4_SXE11, RC7880REG_DCC3_ST2M0, RC7880REG_D8_STM8M0B,
				RC7880REG_TS4_SXE12);
		RC7880OHUnitUnstandardF1DxcWrite(RC7880REG_D5_STM8M0A,
				RC7880REG_TS1_SXE11, RC7880REG_F1_ST2M0, RC7880REG_D5_STM8M0B,
				RC7880REG_TS1_SXE12);
		break;
	}
	case 0x09: /*A & XE12  */
	{
		RC7880OHUnitUnstandardEowDxcWrite(RC7880REG_D4_STM8M0A,
				RC7880REG_TS5_SXE12, RC7880REG_TS5_SXE11, RC7880REG_D4_STM8M0B,
				RC7880REG_EOW_OH);
		RC7880OHUnitUnstandardD6DxcWrite(RC7880REG_D6_STM8M0A,
				RC7880REG_TS2_SXE12, RC7880REG_TS2_SXE11, RC7880REG_D6_STM8M0B,
				RC7880REG_DCC1_ST2M0);
		RC7880OHUnitUnstandardD7DxcWrite(RC7880REG_D7_STM8M0A,
				RC7880REG_TS3_SXE12, RC7880REG_TS3_SXE11, RC7880REG_D7_STM8M0B,
				RC7880REG_DCC2_ST2M0);
		RC7880OHUnitUnstandardD8DxcWrite(RC7880REG_D8_STM8M0A,
				RC7880REG_TS4_SXE12, RC7880REG_TS4_SXE11, RC7880REG_D8_STM8M0B,
				RC7880REG_DCC3_ST2M0);
		RC7880OHUnitUnstandardF1DxcWrite(RC7880REG_D5_STM8M0A,
				RC7880REG_TS1_SXE12, RC7880REG_TS1_SXE11, RC7880REG_D5_STM8M0B,
				RC7880REG_F1_ST2M0);
		break;
	}
	case 0x06: /*XE11 & B*/
	{
		RC7880OHUnitUnstandardEowDxcWrite(RC7880REG_TS5_SXE11,
				RC7880REG_D4_STM8M0A, RC7880REG_D4_STM8M0B, RC7880REG_EOW_OH,
				RC7880REG_TS5_SXE12);
		RC7880OHUnitUnstandardD6DxcWrite(RC7880REG_TS2_SXE11,
				RC7880REG_D6_STM8M0A, RC7880REG_D6_STM8M0B,
				RC7880REG_DCC1_ST2M0, RC7880REG_TS2_SXE12);
		RC7880OHUnitUnstandardD7DxcWrite(RC7880REG_TS3_SXE11,
				RC7880REG_D7_STM8M0A, RC7880REG_D7_STM8M0B,
				RC7880REG_DCC2_ST2M0, RC7880REG_TS3_SXE12);
		RC7880OHUnitUnstandardD8DxcWrite(RC7880REG_TS4_SXE11,
				RC7880REG_D8_STM8M0A, RC7880REG_D8_STM8M0B,
				RC7880REG_DCC3_ST2M0, RC7880REG_TS4_SXE12);
		RC7880OHUnitUnstandardF1DxcWrite(RC7880REG_TS1_SXE11,
				RC7880REG_D5_STM8M0A, RC7880REG_D5_STM8M0B, RC7880REG_F1_ST2M0,
				RC7880REG_TS1_SXE12);
		break;
	}
	case 0x0C: /*XE12 & B*/
	{
		RC7880OHUnitUnstandardEowDxcWrite(RC7880REG_D4_STM8M0B,
				RC7880REG_D4_STM8M0A, RC7880REG_TS5_SXE11, RC7880REG_TS5_SXE12,
				RC7880REG_EOW_OH);
		RC7880OHUnitUnstandardD6DxcWrite(RC7880REG_D6_STM8M0B,
				RC7880REG_D6_STM8M0A, RC7880REG_TS2_SXE11, RC7880REG_TS2_SXE12,
				RC7880REG_DCC1_ST2M0);
		RC7880OHUnitUnstandardD7DxcWrite(RC7880REG_D7_STM8M0B,
				RC7880REG_D7_STM8M0A, RC7880REG_TS3_SXE11, RC7880REG_TS3_SXE12,
				RC7880REG_DCC2_ST2M0);
		RC7880OHUnitUnstandardD8DxcWrite(RC7880REG_D8_STM8M0B,
				RC7880REG_D8_STM8M0A, RC7880REG_TS4_SXE11, RC7880REG_TS4_SXE12,
				RC7880REG_DCC3_ST2M0);
		RC7880OHUnitUnstandardF1DxcWrite(RC7880REG_D5_STM8M0B,
				RC7880REG_D5_STM8M0A, RC7880REG_TS1_SXE11, RC7880REG_TS1_SXE12,
				RC7880REG_F1_ST2M0);
		break;
	}
	case 0x0A: /*XE11 & XE1_2*/
	{
		RC7880OHUnitUnstandardEowDxcWrite(RC7880REG_TS5_SXE11,
				RC7880REG_D4_STM8M0A, RC7880REG_TS5_SXE12, RC7880REG_D4_STM8M0B,
				RC7880REG_EOW_OH);
		RC7880OHUnitUnstandardD6DxcWrite(RC7880REG_TS2_SXE11,
				RC7880REG_D6_STM8M0A, RC7880REG_TS2_SXE12, RC7880REG_D6_STM8M0B,
				RC7880REG_DCC1_ST2M0);
		RC7880OHUnitUnstandardD7DxcWrite(RC7880REG_TS3_SXE11,
				RC7880REG_D7_STM8M0A, RC7880REG_TS3_SXE12, RC7880REG_D7_STM8M0B,
				RC7880REG_DCC2_ST2M0);
		RC7880OHUnitUnstandardD8DxcWrite(RC7880REG_TS4_SXE11,
				RC7880REG_D8_STM8M0A, RC7880REG_TS4_SXE12, RC7880REG_D8_STM8M0B,
				RC7880REG_DCC3_ST2M0);
		RC7880OHUnitUnstandardF1DxcWrite(RC7880REG_TS1_SXE11,
				RC7880REG_D5_STM8M0A, RC7880REG_TS1_SXE12, RC7880REG_D5_STM8M0B,
				RC7880REG_F1_ST2M0);
		break;
	}
	case 0x05: /*A & B*/
	{
		RC7880OHUnitUnstandardEowDxcWrite(RC7880REG_D4_STM8M0A,
				RC7880REG_D4_STM8M0B, RC7880REG_TS5_SXE11, RC7880REG_EOW_OH,
				RC7880REG_TS5_SXE12);
		RC7880OHUnitUnstandardD6DxcWrite(RC7880REG_D6_STM8M0A,
				RC7880REG_D6_STM8M0B, RC7880REG_TS2_SXE11, RC7880REG_DCC1_ST2M0,
				RC7880REG_TS2_SXE12);
		RC7880OHUnitUnstandardD7DxcWrite(RC7880REG_D7_STM8M0A,
				RC7880REG_D7_STM8M0B, RC7880REG_TS3_SXE11, RC7880REG_DCC2_ST2M0,
				RC7880REG_TS3_SXE12);
		RC7880OHUnitUnstandardD8DxcWrite(RC7880REG_D8_STM8M0A,
				RC7880REG_D8_STM8M0B, RC7880REG_TS4_SXE11, RC7880REG_DCC3_ST2M0,
				RC7880REG_TS4_SXE12);
		RC7880OHUnitUnstandardF1DxcWrite(RC7880REG_D5_STM8M0A,
				RC7880REG_D5_STM8M0B, RC7880REG_TS1_SXE11, RC7880REG_F1_ST2M0,
				RC7880REG_TS1_SXE12);
		break;
	}
	case 0x07: /*A & XE11 & B*/
	{
		RC7880OHUnitUnstandardEowDxcWrite(RC7880REG_D4_STM8M0A,
				RC7880REG_D4_STM8M0B, RC7880REG_EOW_OH, RC7880REG_TS5_SXE11,
				RC7880REG_TS5_SXE12);
		RC7880OHUnitUnstandardD6DxcWrite(RC7880REG_D6_STM8M0A,
				RC7880REG_D6_STM8M0B, RC7880REG_DCC1_ST2M0, RC7880REG_TS2_SXE11,
				RC7880REG_TS2_SXE12);
		RC7880OHUnitUnstandardD7DxcWrite(RC7880REG_D7_STM8M0A,
				RC7880REG_D7_STM8M0B, RC7880REG_DCC2_ST2M0, RC7880REG_TS3_SXE11,
				RC7880REG_TS2_SXE12);
		RC7880OHUnitUnstandardD8DxcWrite(RC7880REG_D8_STM8M0A,
				RC7880REG_D8_STM8M0B, RC7880REG_DCC3_ST2M0, RC7880REG_TS4_SXE11,
				RC7880REG_TS2_SXE12);
		RC7880OHUnitUnstandardF1DxcWrite(RC7880REG_D5_STM8M0A,
				RC7880REG_D5_STM8M0B, RC7880REG_F1_ST2M0, RC7880REG_TS1_SXE11,
				RC7880REG_TS2_SXE12);
		break;
	}
	case 0x0D: /*A & B & XE12*/
	{
		RC7880OHUnitUnstandardEowDxcWrite(RC7880REG_D4_STM8M0A,
				RC7880REG_D4_STM8M0B, RC7880REG_TS5_SXE11, RC7880REG_TS5_SXE12,
				RC7880REG_EOW_OH);
		RC7880OHUnitUnstandardD6DxcWrite(RC7880REG_D6_STM8M0A,
				RC7880REG_D6_STM8M0B, RC7880REG_TS2_SXE11, RC7880REG_TS2_SXE12,
				RC7880REG_DCC1_ST2M0);
		RC7880OHUnitUnstandardD7DxcWrite(RC7880REG_D7_STM8M0A,
				RC7880REG_D7_STM8M0B, RC7880REG_TS3_SXE11, RC7880REG_TS2_SXE12,
				RC7880REG_DCC2_ST2M0);
		RC7880OHUnitUnstandardD8DxcWrite(RC7880REG_D8_STM8M0A,
				RC7880REG_D8_STM8M0B, RC7880REG_TS4_SXE11, RC7880REG_TS2_SXE12,
				RC7880REG_DCC3_ST2M0);
		RC7880OHUnitUnstandardF1DxcWrite(RC7880REG_D5_STM8M0A,
				RC7880REG_D5_STM8M0B, RC7880REG_TS1_SXE11, RC7880REG_TS2_SXE12,
				RC7880REG_F1_ST2M0);
		break;
	}
	case 0x0B: /*A & XE11& XE12  */
	{
		RC7880OHUnitUnstandardEowDxcWrite(RC7880REG_D4_STM8M0A,
				RC7880REG_TS5_SXE11, RC7880REG_TS5_SXE12, RC7880REG_D4_STM8M0B,
				RC7880REG_EOW_OH);
		RC7880OHUnitUnstandardD6DxcWrite(RC7880REG_D6_STM8M0A,
				RC7880REG_TS2_SXE11, RC7880REG_TS2_SXE12, RC7880REG_D6_STM8M0B,
				RC7880REG_DCC1_ST2M0);
		RC7880OHUnitUnstandardD7DxcWrite(RC7880REG_D7_STM8M0A,
				RC7880REG_TS3_SXE11, RC7880REG_TS3_SXE12, RC7880REG_D7_STM8M0B,
				RC7880REG_DCC2_ST2M0);
		RC7880OHUnitUnstandardD8DxcWrite(RC7880REG_D8_STM8M0A,
				RC7880REG_TS4_SXE11, RC7880REG_TS4_SXE12, RC7880REG_D8_STM8M0B,
				RC7880REG_DCC3_ST2M0);
		RC7880OHUnitUnstandardF1DxcWrite(RC7880REG_D5_STM8M0A,
				RC7880REG_TS1_SXE11, RC7880REG_TS1_SXE12, RC7880REG_D5_STM8M0B,
				RC7880REG_F1_ST2M0);
		break;
	}
	case 0x0E: /*B & XE11& XE12  */
	{
		RC7880OHUnitUnstandardEowDxcWrite(RC7880REG_TS5_SXE11,
				RC7880REG_D4_STM8M0A, RC7880REG_D4_STM8M0B, RC7880REG_TS5_SXE12,
				RC7880REG_EOW_OH);
		RC7880OHUnitUnstandardD6DxcWrite(RC7880REG_TS2_SXE11,
				RC7880REG_D6_STM8M0A, RC7880REG_D6_STM8M0B, RC7880REG_TS2_SXE12,
				RC7880REG_DCC1_ST2M0);
		RC7880OHUnitUnstandardD7DxcWrite(RC7880REG_TS3_SXE11,
				RC7880REG_D7_STM8M0A, RC7880REG_D7_STM8M0B, RC7880REG_TS3_SXE12,
				RC7880REG_DCC2_ST2M0);
		RC7880OHUnitUnstandardD8DxcWrite(RC7880REG_TS4_SXE11,
				RC7880REG_D8_STM8M0A, RC7880REG_D8_STM8M0B, RC7880REG_TS4_SXE12,
				RC7880REG_DCC3_ST2M0);
		RC7880OHUnitUnstandardF1DxcWrite(RC7880REG_TS1_SXE11,
				RC7880REG_D5_STM8M0A, RC7880REG_D5_STM8M0B, RC7880REG_TS1_SXE12,
				RC7880REG_F1_ST2M0);
		break;
	}
	case 0x0F: /*A & XE12 & B & XE12*/
	{
		RC7880OHUnitUnstandardEowDxcWrite(RC7880REG_D4_STM8M0A,
				RC7880REG_TS5_SXE11, RC7880REG_D4_STM8M0B, RC7880REG_TS5_SXE12,
				RC7880REG_EOW_OH);
		RC7880OHUnitUnstandardD6DxcWrite(RC7880REG_D6_STM8M0A,
				RC7880REG_TS2_SXE11, RC7880REG_D6_STM8M0B, RC7880REG_TS2_SXE12,
				RC7880REG_DCC1_ST2M0);
		RC7880OHUnitUnstandardD7DxcWrite(RC7880REG_D7_STM8M0A,
				RC7880REG_TS3_SXE11, RC7880REG_D7_STM8M0B, RC7880REG_TS2_SXE12,
				RC7880REG_DCC2_ST2M0);
		RC7880OHUnitUnstandardD8DxcWrite(RC7880REG_D8_STM8M0A,
				RC7880REG_TS4_SXE11, RC7880REG_D8_STM8M0B, RC7880REG_TS2_SXE12,
				RC7880REG_DCC3_ST2M0);
		RC7880OHUnitUnstandardF1DxcWrite(RC7880REG_D5_STM8M0A,
				RC7880REG_TS1_SXE11, RC7880REG_D5_STM8M0B, RC7880REG_TS2_SXE12,
				RC7880REG_F1_ST2M0);
		break;
	}
	default: /*default a usable*/
	{
		RC7880OHUnitUnstandardEowDxcWrite(RC7880REG_EOW_OH,
				RC7880REG_D4_STM8M0A, RC7880REG_TS5_SXE11, RC7880REG_D4_STM8M0B,
				RC7880REG_TS5_SXE12);
		RC7880OHUnitUnstandardD6DxcWrite(RC7880REG_DCC1_ST2M0,
				RC7880REG_D6_STM8M0A, RC7880REG_TS2_SXE11, RC7880REG_D6_STM8M0B,
				RC7880REG_TS2_SXE12);
		RC7880OHUnitUnstandardD7DxcWrite(RC7880REG_DCC2_ST2M0,
				RC7880REG_D7_STM8M0A, RC7880REG_TS3_SXE11, RC7880REG_D7_STM8M0B,
				RC7880REG_TS3_SXE12);
		RC7880OHUnitUnstandardD8DxcWrite(RC7880REG_DCC3_ST2M0,
				RC7880REG_D8_STM8M0A, RC7880REG_TS4_SXE11, RC7880REG_D8_STM8M0B,
				RC7880REG_TS4_SXE12);
		RC7880OHUnitUnstandardF1DxcWrite(RC7880REG_F1_ST2M0,
				RC7880REG_D5_STM8M0A, RC7880REG_TS1_SXE11, RC7880REG_D5_STM8M0B,
				RC7880REG_TS1_SXE12);
		break;
	}
	}
}

void dccStandardModeOhCommFunc(BYTE dccint) {
	switch (dccint) {
	case 0x01: /*A*/
	{
		/*EOW DOWN FROM A ; EOW UP TO A ; EOW UP TO X ; EOW UP TO B*/
		RC7880OHUnitStandardEowDxcWrite(RC7880REG_E1_STM8M0A, RC7880REG_EOW_OH,
				RC7880REG_TS5_SXE11, RC7880REG_E1_STM8M0B, RC7880REG_TS5_SXE12);
		/* HDLC */
		/*D1 COMM DOWN FROM A , D1 COMM UP TO A , D1 COMM UP TO X , D1 COMM UP TO B*/
		RC7880OHUnitStandardD1DxcWrite( RC7880REG_D1_STM8M0A,
				RC7880REG_DCC1_ST2M0, RC7880REG_TS2_SXE11, RC7880REG_D1_STM8M0B,
				RC7880REG_TS2_SXE12);
		/*D2 COMM DOWN FROM A , D2 COMM UP TO A , D2 COMM UP TO X , D2 COMM UP TO B*/
		RC7880OHUnitStandardD2DxcWrite(RC7880REG_D2_STM8M0A,
				RC7880REG_DCC2_ST2M0, RC7880REG_TS3_SXE11, RC7880REG_D2_STM8M0B,
				RC7880REG_TS3_SXE12);
		/*D3 COMM DOWN FROM A , D3 COMM UP TO A , D3 COMM UP TO X , D3 COMM UP TO B*/
		RC7880OHUnitStandardD3DxcWrite(RC7880REG_D3_STM8M0A,
				RC7880REG_DCC3_ST2M0, RC7880REG_TS4_SXE11, RC7880REG_D3_STM8M0B,
				RC7880REG_TS4_SXE12);
		/*F1 DOWN FROM A ; F1 UP TO A ; F1 UP TO X ; F1 UP TO B*/
		RC7880OHUnitStandardF1DxcWrite(RC7880REG_F1_STM8M0A, RC7880REG_F1_ST2M0,
				RC7880REG_TS1_SXE11, RC7880REG_F1_STM8M0B, RC7880REG_TS1_SXE12);
		break;
	}
	case 0x02: /*X*/
	{
		/*EOW DOWN FROM X ; EOW UP TO A ; EOW UP TO X ; EOW UP TO B*/
		RC7880OHUnitStandardEowDxcWrite(RC7880REG_TS5_SXE11,
				RC7880REG_E1_STM8M0A, RC7880REG_EOW_OH, RC7880REG_E1_STM8M0B,
				RC7880REG_TS5_SXE12);
		/* HDLC */
		/*D1 COMM DOWN FROM X , D1 COMM UP TO A , D1 COMM UP TO X , D1 COMM UP TO B*/
		RC7880OHUnitStandardD1DxcWrite( RC7880REG_TS2_SXE11,
				RC7880REG_D1_STM8M0A, RC7880REG_DCC1_ST2M0,
				RC7880REG_D1_STM8M0B, RC7880REG_TS2_SXE12);
		/*D2 COMM DOWN FROM X , D2 COMM UP TO A , D2 COMM UP TO X , D2 COMM UP TO B*/
		RC7880OHUnitStandardD2DxcWrite(RC7880REG_TS3_SXE11,
				RC7880REG_D2_STM8M0A, RC7880REG_DCC2_ST2M0,
				RC7880REG_D2_STM8M0B, RC7880REG_TS3_SXE12);
		/*D3 COMM DOWN FROM X , D3 COMM UP TO A , D3 COMM UP TO X , D3 COMM UP TO B*/
		RC7880OHUnitStandardD3DxcWrite(RC7880REG_TS4_SXE11,
				RC7880REG_D3_STM8M0A, RC7880REG_DCC3_ST2M0,
				RC7880REG_D3_STM8M0B, RC7880REG_TS4_SXE12);
		/*F1 DOWN FROM X ; F1 UP TO A ; F1 UP TO X ; F1 UP TO B*/
		RC7880OHUnitStandardF1DxcWrite(RC7880REG_TS1_SXE11,
				RC7880REG_F1_STM8M0A, RC7880REG_F1_ST2M0, RC7880REG_F1_STM8M0B,
				RC7880REG_TS1_SXE12);
		break;
	}
	case 0x04: /*B*/
	{
		/*EOW DOWN FROM XB ; EOW UP TO A ; EOW UP TO X ; EOW UP TO B*/
		RC7880OHUnitStandardEowDxcWrite(RC7880REG_E1_STM8M0B,
				RC7880REG_E1_STM8M0A, RC7880REG_TS5_SXE11, RC7880REG_EOW_OH,
				RC7880REG_TS5_SXE12);
		/* HDLC */
		/*D1 COMM DOWN FROM A62 , D1 COMM UP TO A , D1 COMM UP TO X , D1 COMM UP TO B*/
		RC7880OHUnitStandardD1DxcWrite( RC7880REG_D1_STM8M0B,
				RC7880REG_D1_STM8M0A, RC7880REG_TS2_SXE11, RC7880REG_DCC1_ST2M0,
				RC7880REG_TS2_SXE12);
		/*D2 COMM DOWN FROM A63 , D2 COMM UP TO A , D2 COMM UP TO X , D2 COMM UP TO B*/
		RC7880OHUnitStandardD2DxcWrite(RC7880REG_D2_STM8M0B,
				RC7880REG_D2_STM8M0A, RC7880REG_TS3_SXE11, RC7880REG_DCC2_ST2M0,
				RC7880REG_TS3_SXE12);
		/*D3 COMM DOWN FROM A64 , D3 COMM UP TO A , D3 COMM UP TO X , D3 COMM UP TO B*/
		RC7880OHUnitStandardD3DxcWrite(RC7880REG_D3_STM8M0B,
				RC7880REG_D3_STM8M0A, RC7880REG_TS4_SXE11, RC7880REG_DCC3_ST2M0,
				RC7880REG_TS4_SXE12);
		/*F1 DOWN FROM B ; F1 UP TO A ; F1 UP TO X ; F1 UP TO B*/
		RC7880OHUnitStandardF1DxcWrite(RC7880REG_F1_STM8M0B,
				RC7880REG_F1_STM8M0A, RC7880REG_TS1_SXE11, RC7880REG_F1_ST2M0,
				RC7880REG_TS1_SXE12);
		break;
	}
	case 0x08: /*XE12*/
	{
		/*EOW DOWN FROM X ; EOW UP TO A ; EOW UP TO X ; EOW UP TO B*/
		RC7880OHUnitStandardEowDxcWrite(RC7880REG_TS5_SXE12,
				RC7880REG_E1_STM8M0A, RC7880REG_TS5_SXE11, RC7880REG_E1_STM8M0B,
				RC7880REG_EOW_OH);
		/* HDLC */
		/*D1 COMM DOWN FROM X , D1 COMM UP TO A , D1 COMM UP TO X , D1 COMM UP TO B*/
		RC7880OHUnitStandardD1DxcWrite( RC7880REG_TS2_SXE12,
				RC7880REG_D1_STM8M0A, RC7880REG_TS2_SXE11, RC7880REG_D1_STM8M0B,
				RC7880REG_DCC1_ST2M0);
		/*D2 COMM DOWN FROM X , D2 COMM UP TO A , D2 COMM UP TO X , D2 COMM UP TO B*/
		RC7880OHUnitStandardD2DxcWrite(RC7880REG_TS3_SXE12,
				RC7880REG_D2_STM8M0A, RC7880REG_TS3_SXE11, RC7880REG_D2_STM8M0B,
				RC7880REG_DCC2_ST2M0);
		/*D3 COMM DOWN FROM X , D3 COMM UP TO A , D3 COMM UP TO X , D3 COMM UP TO B*/
		RC7880OHUnitStandardD3DxcWrite(RC7880REG_TS4_SXE12,
				RC7880REG_D3_STM8M0A, RC7880REG_TS4_SXE11, RC7880REG_D3_STM8M0B,
				RC7880REG_DCC3_ST2M0);
		/*F1 DOWN FROM X ; F1 UP TO A ; F1 UP TO X ; F1 UP TO B*/
		RC7880OHUnitStandardF1DxcWrite(RC7880REG_TS1_SXE12,
				RC7880REG_F1_STM8M0A, RC7880REG_TS1_SXE11, RC7880REG_F1_STM8M0B,
				RC7880REG_F1_ST2M0);
		break;
	}
	case 0x03: /*A & XE11  */
	{
		/*EOW DOWN FROM A ; X UP TO A ; EOW UP TO X ; X UP TO B*/
		RC7880OHUnitStandardEowDxcWrite(RC7880REG_E1_STM8M0A,
				RC7880REG_TS5_SXE11, RC7880REG_EOW_OH, RC7880REG_E1_STM8M0B,
				RC7880REG_TS5_SXE12);
		/* HDLC */
		/*D1 COMM DOWN FROM A62 , X COMM UP TO A , D1 COMM UP TO X , X COMM UP TO B*/
		RC7880OHUnitStandardD1DxcWrite( RC7880REG_D1_STM8M0A,
				RC7880REG_TS2_SXE11, RC7880REG_DCC1_ST2M0, RC7880REG_D1_STM8M0B,
				RC7880REG_TS2_SXE12);
		/*D2 COMM DOWN FROM A , X COMM UP TO A , D2 COMM UP TO X , X COMM UP TO B*/
		RC7880OHUnitStandardD2DxcWrite(RC7880REG_D2_STM8M0A,
				RC7880REG_TS3_SXE11, RC7880REG_DCC2_ST2M0, RC7880REG_D2_STM8M0B,
				RC7880REG_TS3_SXE12);
		/*D3 COMM DOWN FROM A , X COMM UP TO A , D3 COMM UP TO X , X COMM UP TO B*/
		RC7880OHUnitStandardD3DxcWrite(RC7880REG_D3_STM8M0A,
				RC7880REG_TS4_SXE11, RC7880REG_DCC3_ST2M0, RC7880REG_D3_STM8M0B,
				RC7880REG_TS4_SXE12);
		/*F1 DOWN FROM A ; X UP TO A ; F1 UP TO X ; X UP TO B*/
		RC7880OHUnitStandardF1DxcWrite(RC7880REG_F1_STM8M0A,
				RC7880REG_TS1_SXE11, RC7880REG_F1_ST2M0, RC7880REG_F1_STM8M0B,
				RC7880REG_TS1_SXE12);
		break;
	}
	case 0x09: /*A & XE12  */
	{
		RC7880OHUnitStandardEowDxcWrite(RC7880REG_E1_STM8M0A,
				RC7880REG_TS5_SXE12, RC7880REG_TS5_SXE11, RC7880REG_E1_STM8M0B,
				RC7880REG_EOW_OH);
		RC7880OHUnitStandardD1DxcWrite(RC7880REG_D1_STM8M0A,
				RC7880REG_TS2_SXE12, RC7880REG_TS2_SXE11, RC7880REG_D1_STM8M0B,
				RC7880REG_DCC1_ST2M0);
		RC7880OHUnitStandardD2DxcWrite(RC7880REG_D2_STM8M0A,
				RC7880REG_TS3_SXE12, RC7880REG_TS3_SXE11, RC7880REG_D2_STM8M0B,
				RC7880REG_DCC2_ST2M0);
		RC7880OHUnitStandardD3DxcWrite(RC7880REG_D3_STM8M0A,
				RC7880REG_TS4_SXE12, RC7880REG_TS4_SXE11, RC7880REG_D3_STM8M0B,
				RC7880REG_DCC3_ST2M0);
		RC7880OHUnitStandardF1DxcWrite(RC7880REG_F1_STM8M0A,
				RC7880REG_TS1_SXE12, RC7880REG_TS1_SXE11, RC7880REG_F1_STM8M0B,
				RC7880REG_F1_ST2M0);
		break;
	}
	case 0x06: /*XE11 & B*/
	{
		RC7880OHUnitStandardEowDxcWrite(RC7880REG_TS5_SXE11,
				RC7880REG_E1_STM8M0A, RC7880REG_E1_STM8M0B, RC7880REG_EOW_OH,
				RC7880REG_TS5_SXE12);
		RC7880OHUnitStandardD1DxcWrite(RC7880REG_TS2_SXE11,
				RC7880REG_D1_STM8M0A, RC7880REG_D1_STM8M0B,
				RC7880REG_DCC1_ST2M0, RC7880REG_TS2_SXE12);
		RC7880OHUnitStandardD2DxcWrite(RC7880REG_TS3_SXE11,
				RC7880REG_D2_STM8M0A, RC7880REG_D2_STM8M0B,
				RC7880REG_DCC2_ST2M0, RC7880REG_TS3_SXE12);
		RC7880OHUnitStandardD3DxcWrite(RC7880REG_TS4_SXE11,
				RC7880REG_D3_STM8M0A, RC7880REG_D3_STM8M0B,
				RC7880REG_DCC3_ST2M0, RC7880REG_TS4_SXE12);
		RC7880OHUnitStandardF1DxcWrite(RC7880REG_TS1_SXE11,
				RC7880REG_F1_STM8M0A, RC7880REG_F1_STM8M0B, RC7880REG_F1_ST2M0,
				RC7880REG_TS1_SXE12);
		break;
	}
	case 0x0C: /*XE12 & B*/
	{
		RC7880OHUnitStandardEowDxcWrite(RC7880REG_E1_STM8M0B,
				RC7880REG_E1_STM8M0A, RC7880REG_TS5_SXE11, RC7880REG_TS5_SXE12,
				RC7880REG_EOW_OH);
		RC7880OHUnitStandardD1DxcWrite(RC7880REG_D1_STM8M0B,
				RC7880REG_D1_STM8M0A, RC7880REG_TS2_SXE11, RC7880REG_TS2_SXE12,
				RC7880REG_DCC1_ST2M0);
		RC7880OHUnitStandardD2DxcWrite(RC7880REG_D2_STM8M0B,
				RC7880REG_D2_STM8M0A, RC7880REG_TS3_SXE11, RC7880REG_TS3_SXE12,
				RC7880REG_DCC2_ST2M0);
		RC7880OHUnitStandardD3DxcWrite(RC7880REG_D3_STM8M0B,
				RC7880REG_D3_STM8M0A, RC7880REG_TS4_SXE11, RC7880REG_TS4_SXE12,
				RC7880REG_DCC3_ST2M0);
		RC7880OHUnitStandardF1DxcWrite(RC7880REG_F1_STM8M0B,
				RC7880REG_F1_STM8M0A, RC7880REG_TS1_SXE11, RC7880REG_TS1_SXE12,
				RC7880REG_F1_ST2M0);
		break;
	}
	case 0x0A: /*XE11 & XE1_2*/
	{
		RC7880OHUnitStandardEowDxcWrite(RC7880REG_TS5_SXE11,
				RC7880REG_E1_STM8M0A, RC7880REG_TS5_SXE12, RC7880REG_E1_STM8M0B,
				RC7880REG_EOW_OH);
		RC7880OHUnitStandardD1DxcWrite(RC7880REG_TS2_SXE11,
				RC7880REG_D1_STM8M0A, RC7880REG_TS2_SXE12, RC7880REG_D1_STM8M0B,
				RC7880REG_DCC1_ST2M0);
		RC7880OHUnitStandardD2DxcWrite(RC7880REG_TS3_SXE11,
				RC7880REG_D2_STM8M0A, RC7880REG_TS3_SXE12, RC7880REG_D2_STM8M0B,
				RC7880REG_DCC2_ST2M0);
		RC7880OHUnitStandardD3DxcWrite(RC7880REG_TS4_SXE11,
				RC7880REG_D3_STM8M0A, RC7880REG_TS4_SXE12, RC7880REG_D3_STM8M0B,
				RC7880REG_DCC3_ST2M0);
		RC7880OHUnitStandardF1DxcWrite(RC7880REG_TS1_SXE11,
				RC7880REG_F1_STM8M0A, RC7880REG_TS1_SXE12, RC7880REG_F1_STM8M0B,
				RC7880REG_F1_ST2M0);
		break;
	}
	case 0x05: /*A & B*/
	{
		/*EOW DOWN FROM A ; B UP TO A ; B UP TO X ; EOW UP TO B*/
		RC7880OHUnitStandardEowDxcWrite(RC7880REG_E1_STM8M0A,
				RC7880REG_E1_STM8M0B, RC7880REG_TS5_SXE11, RC7880REG_EOW_OH,
				RC7880REG_TS5_SXE12);
		/* HDLC */
		/*D1 COMM DOWN FROM A , B COMM UP TO A , D1 COMM UP TO X , D1 COMM UP TO B*/
		RC7880OHUnitStandardD1DxcWrite( RC7880REG_D1_STM8M0A,
				RC7880REG_D1_STM8M0B, RC7880REG_TS2_SXE11, RC7880REG_DCC1_ST2M0,
				RC7880REG_TS2_SXE12);
		/*D2 COMM DOWN FROM A , B COMM UP TO A , D2 COMM UP TO X , D2 COMM UP TO B*/
		RC7880OHUnitStandardD2DxcWrite(RC7880REG_D2_STM8M0A,
				RC7880REG_D2_STM8M0B, RC7880REG_TS3_SXE11, RC7880REG_DCC2_ST2M0,
				RC7880REG_TS3_SXE12);
		/*D3 COMM DOWN FROM A , B COMM UP TO A , D3 COMM UP TO X , D3 COMM UP TO B*/
		RC7880OHUnitStandardD3DxcWrite(RC7880REG_D3_STM8M0A,
				RC7880REG_D3_STM8M0B, RC7880REG_TS4_SXE11, RC7880REG_DCC3_ST2M0,
				RC7880REG_TS4_SXE12);
		/*F1 DOWN FROM A ; B UP TO A ; F1 UP TO A; F1 UP TO B*/
		RC7880OHUnitStandardF1DxcWrite(RC7880REG_F1_STM8M0A,
				RC7880REG_F1_STM8M0B, RC7880REG_TS1_SXE11, RC7880REG_F1_ST2M0,
				RC7880REG_TS1_SXE12);
		break;
	}
	case 0x07: /* A & XE11 & B  */
	{
		/*EOW DOWN FROM A ; B UP TO A ; B UP TO X ; X UP TO B*/
		RC7880OHUnitStandardEowDxcWrite(RC7880REG_E1_STM8M0A,
				RC7880REG_E1_STM8M0B, RC7880REG_EOW_OH, RC7880REG_TS5_SXE11,
				RC7880REG_TS5_SXE12);
		/* HDLC */
		/*D1 COMM DOWN FROM A , B COMM UP TO A , D1 COMM UP TO X , X COMM UP TO B*/
		RC7880OHUnitStandardD1DxcWrite( RC7880REG_D1_STM8M0A,
				RC7880REG_D1_STM8M0B, RC7880REG_DCC1_ST2M0, RC7880REG_TS2_SXE11,
				RC7880REG_TS2_SXE12);
		/*D2 COMM DOWN FROM A , B COMM UP TO A , D2 COMM UP TO X , X COMM UP TO B*/
		RC7880OHUnitStandardD2DxcWrite(RC7880REG_D2_STM8M0A,
				RC7880REG_D2_STM8M0B, RC7880REG_DCC2_ST2M0, RC7880REG_TS3_SXE11,
				RC7880REG_TS3_SXE12);
		/*D3 COMM DOWN FROM A , B COMM UP TO A , D3 COMM UP TO X , X COMM UP TO B*/
		RC7880OHUnitStandardD3DxcWrite(RC7880REG_D3_STM8M0A,
				RC7880REG_D3_STM8M0B, RC7880REG_DCC3_ST2M0, RC7880REG_TS4_SXE11,
				RC7880REG_TS4_SXE12);
		/*F1 DOWN FROM A ; B UP TO A ; F1 UP TO X; X UP TO B*/
		RC7880OHUnitStandardF1DxcWrite(RC7880REG_F1_STM8M0A,
				RC7880REG_F1_STM8M0B, RC7880REG_F1_ST2M0, RC7880REG_TS1_SXE11,
				RC7880REG_TS1_SXE12);
		break;
	}
	case 0x0D: /*A & B & XE12*/
	{
		RC7880OHUnitStandardEowDxcWrite(RC7880REG_E1_STM8M0A,
				RC7880REG_E1_STM8M0B, RC7880REG_TS5_SXE11, RC7880REG_TS5_SXE12,
				RC7880REG_EOW_OH);
		RC7880OHUnitStandardD1DxcWrite(RC7880REG_D1_STM8M0A,
				RC7880REG_D1_STM8M0B, RC7880REG_TS2_SXE11, RC7880REG_TS2_SXE12,
				RC7880REG_DCC1_ST2M0);
		RC7880OHUnitStandardD2DxcWrite(RC7880REG_D2_STM8M0A,
				RC7880REG_D2_STM8M0B, RC7880REG_TS3_SXE11, RC7880REG_TS2_SXE12,
				RC7880REG_DCC2_ST2M0);
		RC7880OHUnitStandardD3DxcWrite(RC7880REG_D3_STM8M0A,
				RC7880REG_D3_STM8M0B, RC7880REG_TS4_SXE11, RC7880REG_TS2_SXE12,
				RC7880REG_DCC3_ST2M0);
		RC7880OHUnitStandardF1DxcWrite(RC7880REG_F1_STM8M0A,
				RC7880REG_F1_STM8M0B, RC7880REG_TS1_SXE11, RC7880REG_TS2_SXE12,
				RC7880REG_F1_ST2M0);
		break;
	}
	case 0x0B: /*A & XE11& XE12  */
	{
		RC7880OHUnitStandardEowDxcWrite(RC7880REG_E1_STM8M0A,
				RC7880REG_TS5_SXE11, RC7880REG_TS5_SXE12, RC7880REG_E1_STM8M0B,
				RC7880REG_EOW_OH);
		RC7880OHUnitStandardD1DxcWrite(RC7880REG_D1_STM8M0A,
				RC7880REG_TS2_SXE11, RC7880REG_TS2_SXE12, RC7880REG_D1_STM8M0B,
				RC7880REG_DCC1_ST2M0);
		RC7880OHUnitStandardD2DxcWrite(RC7880REG_D2_STM8M0A,
				RC7880REG_TS3_SXE11, RC7880REG_TS3_SXE12, RC7880REG_D2_STM8M0B,
				RC7880REG_DCC2_ST2M0);
		RC7880OHUnitStandardD3DxcWrite(RC7880REG_D3_STM8M0A,
				RC7880REG_TS4_SXE11, RC7880REG_TS4_SXE12, RC7880REG_D3_STM8M0B,
				RC7880REG_DCC3_ST2M0);
		RC7880OHUnitStandardF1DxcWrite(RC7880REG_F1_STM8M0A,
				RC7880REG_TS1_SXE11, RC7880REG_TS1_SXE12, RC7880REG_F1_STM8M0B,
				RC7880REG_F1_ST2M0);
		break;
	}
	case 0x0E: /*B & XE11& XE12  */
	{
		RC7880OHUnitStandardEowDxcWrite(RC7880REG_TS5_SXE11,
				RC7880REG_E1_STM8M0A, RC7880REG_E1_STM8M0B, RC7880REG_TS5_SXE12,
				RC7880REG_EOW_OH);
		RC7880OHUnitStandardD1DxcWrite(RC7880REG_TS2_SXE11,
				RC7880REG_D1_STM8M0A, RC7880REG_D1_STM8M0B, RC7880REG_TS2_SXE12,
				RC7880REG_DCC1_ST2M0);
		RC7880OHUnitStandardD2DxcWrite(RC7880REG_TS3_SXE11,
				RC7880REG_D2_STM8M0A, RC7880REG_D2_STM8M0B, RC7880REG_TS3_SXE12,
				RC7880REG_DCC2_ST2M0);
		RC7880OHUnitStandardD3DxcWrite(RC7880REG_TS4_SXE11,
				RC7880REG_D3_STM8M0A, RC7880REG_D3_STM8M0B, RC7880REG_TS4_SXE12,
				RC7880REG_DCC3_ST2M0);
		RC7880OHUnitStandardF1DxcWrite(RC7880REG_TS1_SXE11,
				RC7880REG_F1_STM8M0A, RC7880REG_F1_STM8M0B, RC7880REG_TS1_SXE12,
				RC7880REG_F1_ST2M0);
		break;
	}
	case 0x0F: /*A & XE12 & B & XE12*/
	{
		RC7880OHUnitStandardEowDxcWrite(RC7880REG_E1_STM8M0A,
				RC7880REG_TS5_SXE11, RC7880REG_E1_STM8M0B, RC7880REG_TS5_SXE12,
				RC7880REG_EOW_OH);
		RC7880OHUnitStandardD1DxcWrite(RC7880REG_D1_STM8M0A,
				RC7880REG_TS2_SXE11, RC7880REG_D1_STM8M0B, RC7880REG_TS2_SXE12,
				RC7880REG_DCC1_ST2M0);
		RC7880OHUnitStandardD2DxcWrite(RC7880REG_D2_STM8M0A,
				RC7880REG_TS3_SXE11, RC7880REG_D2_STM8M0B, RC7880REG_TS2_SXE12,
				RC7880REG_DCC2_ST2M0);
		RC7880OHUnitStandardD3DxcWrite(RC7880REG_D3_STM8M0A,
				RC7880REG_TS4_SXE11, RC7880REG_D3_STM8M0B, RC7880REG_TS2_SXE12,
				RC7880REG_DCC3_ST2M0);
		RC7880OHUnitStandardF1DxcWrite(RC7880REG_F1_STM8M0A,
				RC7880REG_TS1_SXE11, RC7880REG_F1_STM8M0B, RC7880REG_TS2_SXE12,
				RC7880REG_F1_ST2M0);
		break;
	}
	default: /*default a usable*/
	{
		/*EOW DOWN FROM A ; EOW UP TO A ; EOW UP TO X ; EOW UP TO B*/
		RC7880OHUnitStandardEowDxcWrite(RC7880REG_EOW_OH, RC7880REG_E1_STM8M0A,
				RC7880REG_TS5_SXE11, RC7880REG_E1_STM8M0B, RC7880REG_TS5_SXE12);
		/* HDLC */
		/*D1 COMM DOWN FROM A , D1 COMM UP TO A , D1 COMM UP TO X , D1 COMM UP TO B*/
		RC7880OHUnitStandardD1DxcWrite( RC7880REG_DCC1_ST2M0,
				RC7880REG_D1_STM8M0A, RC7880REG_TS2_SXE11, RC7880REG_D1_STM8M0B,
				RC7880REG_TS2_SXE12);
		/*D2 COMM DOWN FROM A , D2 COMM UP TO A , D2 COMM UP TO X , D2 COMM UP TO B*/
		RC7880OHUnitStandardD2DxcWrite(RC7880REG_DCC2_ST2M0,
				RC7880REG_D2_STM8M0A, RC7880REG_TS3_SXE11, RC7880REG_D2_STM8M0B,
				RC7880REG_TS3_SXE12);
		/*D3 COMM DOWN FROM A , D3 COMM UP TO A , D3 COMM UP TO X , D3 COMM UP TO B*/
		RC7880OHUnitStandardD3DxcWrite(RC7880REG_DCC3_ST2M0,
				RC7880REG_D3_STM8M0A, RC7880REG_TS4_SXE11, RC7880REG_D3_STM8M0B,
				RC7880REG_TS4_SXE12);
		/*F1 DOWN FROM A ; F1 UP TO A ; F1 UP TO X ; F1 UP TO B*/
		RC7880OHUnitStandardF1DxcWrite(RC7880REG_F1_ST2M0, RC7880REG_F1_STM8M0A,
				RC7880REG_TS1_SXE11, RC7880REG_F1_STM8M0B, RC7880REG_TS1_SXE12);
		break;
	}
	}
}

void rc7880ManageDccOhCommFunc(BYTE dccMode, BYTE dccint) {
	if (dccMode == DCCMODE_STANDARD) {
		dccStandardModeOhCommFunc(dccint);
	} else {
		dccUnstandardModeOhCommFunc(dccint);
	}
}

int RC7880DrvVC4UnitAlarmRead(BYTE vc4Id, BYTE *iA0P, BYTE *iA1P, BYTE *iA2P) {
	WORD addr;
	volatile BYTE tempData = 0;

	if (((vc4Id != 0) && (vc4Id != 1))
			|| ((iA0P == RC7880_NULL) || (iA1P == RC7880_NULL)
					|| (iA2P == RC7880_NULL))) {
		return RC7880_ERROR;
	}
	addr = RC7880_ADDR + RC7880REG_LPORT_BASEADDR(vc4Id) + RC7880REG_ALARM_IA0;
	tempData = readRc7880RegByte(addr);
	*iA0P = tempData;
	addr = RC7880_ADDR + RC7880REG_LPORT_BASEADDR(vc4Id) + RC7880REG_ALARM_IA1;
	tempData = readRc7880RegByte(addr);
	*iA1P = tempData;
	addr = RC7880_ADDR + RC7880REG_LPORT_BASEADDR(vc4Id) + RC7880REG_ALARM_IA2;
	tempData = readRc7880RegByte(addr);
	*iA2P = tempData;
	return RC7880_OK;
}

int RC7880DrvTU12UnitAlarmRead(BYTE tu12Id, BYTE *e1P, BYTE *dropA, BYTE *DropB) {
	WORD addr;
	BYTE tempData = 0;

	if ((dropA == RC7880_NULL) || (DropB == RC7880_NULL)) {
		return RC7880_ERROR;
	}
	addr = RC7880_ADDR
			+ RC7880REG_TU12REG_BASEADDR(tu12Id) + RC7880REG_ALARM_E1PORT;
	tempData = readRc7880RegByte(addr);
	*e1P = tempData;
	addr = RC7880_ADDR
			+ RC7880REG_TU12REG_BASEADDR(tu12Id) + RC7880REG_ALARM_DROPA;
	tempData = readRc7880RegByte(addr);
	*dropA = tempData;
	addr = RC7880_ADDR
			+ RC7880REG_TU12REG_BASEADDR(tu12Id) + RC7880REG_ALARM_DROPB;
	tempData = readRc7880RegByte(addr);
	*DropB = tempData;
	return RC7880_OK;
}

/*
 *
 */
int RC7880DrvVC4UnitOOMAlarmRead(BYTE vc4Id, BYTE *oomAlmP) {
	WORD addr;
	BYTE tempData = 0;

	if ((oomAlmP == RC7880_NULL) || (vc4Id > 1)) {
		return RC7880_ERROR;
	}
	addr = RC7880_ADDR + RC7880REG_LPORT_BASEADDR(vc4Id) + RC7880REG_POH_ALM;
	tempData = readRc7880RegByte(addr);
	if ((tempData & 0x80) == 0x80) {
		*oomAlmP = 1;
	} else {
		*oomAlmP = 0;
	}
	return RC7880_OK;
}

int RC7880DrvVC4UnitLportLoopWrite(BYTE vc4Id, BYTE inLoop, BYTE outLoop) {
	WORD addr;
	BYTE tempData = 0;
	int result;

	addr = RC7880_ADDR + RC7880REG_LPORT_LOOP;
	tempData = readRc7880RegByte(addr);
	if (vc4Id == VC4ID_A) {
		if (outLoop == LPORTLOOP_ENABLE) /*Liner loop*/
		{
			tempData |= 0xC0;
		} else {
			tempData &= 0x3F;
		}
		if (inLoop == LPORTLOOP_ENABLE) /*device loop*/
		{
			tempData |= 0x20;
			tempData &= 0xEF;
		} else {
			tempData &= 0xCF;
		}
	} else if (vc4Id == VC4ID_B) {
		if (outLoop == LPORTLOOP_ENABLE) /*Liner loop*/
		{
			tempData |= 0x0C;
		} else {
			tempData &= 0xF3;
		}
		if (inLoop == LPORTLOOP_ENABLE) /*device loop*/
		{
			tempData |= 0x02;
			tempData &= 0xFE;
		} else {
			tempData &= 0xFC;
		}
	}
	result = writeRc7880RegByte(addr, tempData);
	return result;
}

int RC7880DrvVC4UnitJ0ModeWrite(BYTE vc4Id, BYTE j0Mode) {
	WORD addr;
	BYTE tempData = 0;
	int result;

	addr = RC7880_ADDR + RC7880REG_LPORT_BASEADDR(vc4Id) + RC7880REG_J0_MODE;
	tempData = readRc7880RegByte(addr);
	if (j0Mode == 1) /*new mode*/
	{
		tempData |= 0x01;
	} else /*old mode*/
	{
		tempData &= 0xFE;
	}
	result = writeRc7880RegByte(addr, tempData);
	return result;
}

static BYTE crc7_byte(BYTE crc, BYTE data) {
	return crc7_syndrome_table[(crc << 1) ^ data];
}

BYTE RC7880DrvCRC7Func(const BYTE *pSrc, DWORD cnt) {
	BYTE crc = 0;

	while (cnt--) {
		crc = crc7_byte(crc, *pSrc++);
	}
	return crc;
}

void RC7880DrvReadNewJxBytes(BYTE *jxCharP, BYTE *jxByteP, BYTE jxLen) {
	BYTE len;

	for (len = 1; len <= jxLen; len++) {
		jxByteP[len] = jxCharP[len - 1];
	}
	jxByteP[0] = 0x80;
	jxByteP[0] = RC7880DrvCRC7Func(&jxByteP[0], 16);
	jxByteP[0] |= 0x80;
}

void RC7880DrvWriteNewJxBytes(BYTE *jxCharP, BYTE *jxByteP, BYTE jxLen) {
	BYTE len;

	memset(jxCharP, 0, 16);
	for (len = 1; len < jxLen; len++) {
		jxCharP[len] = jxByteP[len];
		if (jxByteP[len] == '\0') {
			return;
		}
		jxCharP[len] = jxByteP[len];
	}
	/*	jxByteP[15] = '\0' ;  */
}

/*
 * add by shqp
 * 单写J0 16bytes模式的发送值
 */
int RC7880DrvVC4UnitJ0SendWrite16( BYTE vc4Id, BYTE* nj0, BYTE j0CrcEnable) {

	WORD addr;
	BYTE tempData = 0;
	BYTE len;
	BYTE newJ0Byte[16];
	BYTE jxLen = 0;

	if ((vc4Id != 0) && (vc4Id != 1)) {
		return RC7880_ERROR;
	}
	/*16 byte J0*/
	jxLen = strlen((const char*) nj0);
	if (jxLen > 15) {
		jxLen = 15;
	}
	memset(newJ0Byte, 0x20, sizeof(newJ0Byte));
	if (gVc4OhJ0Send[vc4Id] == 0) {
		RC7880DrvReadNewJxBytes(nj0, newJ0Byte, jxLen);
		if (j0CrcEnable != 1) {
			newJ0Byte[0] = 0x80;
		}
	} else {
		memcpy(newJ0Byte, nj0, 16);
	}
	for (len = 0; len < 16; len++) {
		addr = RC7880_ADDR + RC7880REG_NEWJ0_SEND + vc4Id * 0x0200 + len;
		tempData = newJ0Byte[len];
		if (writeRc7880RegByte(addr, tempData) == RC7880_ERROR) {
			return RC7880_ERROR;
		}
	}
	return RC7880_OK;
}

int RC7880DrvVC4UnitSendOverHeadWrite(
BYTE vc4Id, Vc4UnitOverHead_t *overHeadP,
BYTE j0CrcEnable,
BYTE j1CrcEnable) {
	WORD addr;
	BYTE tempData = 0;
	BYTE len;
	BYTE newJ0Byte[16];
	BYTE jxLen = 0;

	if (((vc4Id != 0) && (vc4Id != 1)) || (overHeadP == RC7880_NULL)) {
		return RC7880_ERROR;
	}
	/* 单bit J0 地址0x040B*/
	addr = RC7880_ADDR + RC7880REG_LPORT_BASEADDR(vc4Id) + RC7880REG_J0_SEND;
	tempData = overHeadP->j0;
	if (writeRc7880RegByte(addr, tempData) == RC7880_ERROR) {
		return RC7880_ERROR;
	}

	/*16 byte J0*/
	jxLen = strlen((const char*) overHeadP->nj0);
	if (jxLen > 15) {
		jxLen = 15;
	}
	memset(newJ0Byte, 0x20, sizeof(newJ0Byte));
	if (gVc4OhJ0Send[vc4Id] == 0) {
		RC7880DrvReadNewJxBytes(overHeadP->nj0, newJ0Byte, jxLen);
		if (j0CrcEnable != 1) {
			newJ0Byte[0] = 0x80;
		}
	} else {
		memcpy(newJ0Byte, overHeadP->nj0, 16);
	}
	for (len = 0; len < 16; len++) {
		addr = RC7880_ADDR + RC7880REG_NEWJ0_SEND + vc4Id * 0x0200 + len;
		tempData = newJ0Byte[len];
		if (writeRc7880RegByte(addr, tempData) == RC7880_ERROR) {
			return RC7880_ERROR;
		}
	}
	addr = RC7880_ADDR + RC7880REG_LPORT_BASEADDR(vc4Id) + RC7880REG_K1_SEND;
	tempData = overHeadP->k1;
	if (writeRc7880RegByte(addr, tempData) == RC7880_ERROR) {
		return RC7880_ERROR;
	}
	addr = RC7880_ADDR + RC7880REG_LPORT_BASEADDR(vc4Id) + RC7880REG_K2_SEND;
	tempData = overHeadP->k2;
	if (writeRc7880RegByte(addr, tempData) == RC7880_ERROR) {
		return RC7880_ERROR;
	}
	addr = RC7880_ADDR + RC7880REG_LPORT_BASEADDR(vc4Id) + RC7880REG_S1_SEND;
	tempData = overHeadP->s1;
	if (writeRc7880RegByte(addr, tempData) == RC7880_ERROR) {
		return RC7880_ERROR;
	}
	addr = RC7880_ADDR + RC7880REG_LPORT_BASEADDR(vc4Id) + RC7880REG_X1_SEND;
	tempData = overHeadP->x1;
	if (writeRc7880RegByte(addr, tempData) == RC7880_ERROR) {
		return RC7880_ERROR;
	}
	addr = RC7880_ADDR + RC7880REG_LPORT_BASEADDR(vc4Id) + RC7880REG_X2_SEND;
	tempData = overHeadP->x2;
	if (writeRc7880RegByte(addr, tempData) == RC7880_ERROR) {
		return RC7880_ERROR;
	}
	jxLen = strlen((const char*) overHeadP->j1);
	if (jxLen > 15) {
		jxLen = 15;
	}
	memset(newJ0Byte, 0x20, sizeof(newJ0Byte));
	if (gVc4OhJ1Send[vc4Id] == 0) {
		RC7880DrvReadNewJxBytes(overHeadP->j1, newJ0Byte, jxLen);
		if (j1CrcEnable != 1) {
			newJ0Byte[0] = 0x80;
		}
	} else {
		memcpy(newJ0Byte, overHeadP->j1, 16);
	}
	for (len = 0; len < 16; len++) {
		addr = RC7880_ADDR + RC7880REG_LPORT_BASEADDR(vc4Id) + RC7880REG_J1_SEND
				+ len;
		tempData = newJ0Byte[len];
		if (writeRc7880RegByte(addr, tempData) == RC7880_ERROR) {
			return RC7880_ERROR;
		}
	}
	addr = RC7880_ADDR + RC7880REG_LPORT_BASEADDR(vc4Id) + RC7880REG_C2_SEND;
	tempData = overHeadP->c2;
	if (writeRc7880RegByte(addr, tempData) == RC7880_ERROR) {
		return RC7880_ERROR;
	}
	addr = RC7880_ADDR + RC7880REG_LPORT_BASEADDR(vc4Id) + RC7880REG_K3_SEND;
	tempData = overHeadP->k3;
	if (writeRc7880RegByte(addr, tempData) == RC7880_ERROR) {
		return RC7880_ERROR;
	}
	addr = RC7880_ADDR + RC7880REG_LPORT_BASEADDR(vc4Id) + RC7880REG_N1_SEND;
	tempData = overHeadP->n1;
	if (writeRc7880RegByte(addr, tempData) == RC7880_ERROR) {
		return RC7880_ERROR;
	}
	return RC7880_OK;
}

int RC7880DrvVC4UnitRcvOverHeadRead(
BYTE vc4Id, Vc4UnitOverHead_t *overHeadP) {
	WORD addr;
	BYTE tempData = 0;
	BYTE len;
	BYTE newJ0Byte[16];

	if (((vc4Id != 0) && (vc4Id != 1)) || (overHeadP == RC7880_NULL)) {
		return RC7880_ERROR;
	}
	addr = RC7880_ADDR + RC7880REG_LPORT_BASEADDR(vc4Id) + RC7880REG_J0_RCV;
	tempData = readRc7880RegByte(addr);
	overHeadP->j0 = tempData;
	addr = RC7880_ADDR + RC7880REG_LPORT_BASEADDR(vc4Id) + RC7880REG_K1_RCV;
	tempData = readRc7880RegByte(addr);
	overHeadP->k1 = tempData;
	addr = RC7880_ADDR + RC7880REG_LPORT_BASEADDR(vc4Id) + RC7880REG_K2_RCV;
	tempData = readRc7880RegByte(addr);
	overHeadP->k2 = tempData;
	addr = RC7880_ADDR + RC7880REG_LPORT_BASEADDR(vc4Id) + RC7880REG_S1_RCV;
	tempData = readRc7880RegByte(addr);
	overHeadP->s1 = tempData;
	addr = RC7880_ADDR + RC7880REG_LPORT_BASEADDR(vc4Id) + RC7880REG_X1_RCV;
	tempData = readRc7880RegByte(addr);
	overHeadP->x1 = tempData;
	addr = RC7880_ADDR + RC7880REG_LPORT_BASEADDR(vc4Id) + RC7880REG_X2_RCV;
	tempData = readRc7880RegByte(addr);
	overHeadP->x2 = tempData;
	memset(newJ0Byte, 0x20, sizeof(newJ0Byte));
	for (len = 0; len < 16; len++) {
		addr = RC7880_ADDR + RC7880REG_LPORT_BASEADDR(vc4Id) + RC7880REG_J1_RCV
				+ len;
		tempData = readRc7880RegByte(addr);
		newJ0Byte[len] = tempData;
	}
	RC7880DrvWriteNewJxBytes(overHeadP->j1, newJ0Byte, 16);

	memset(newJ0Byte, 0x20, sizeof(newJ0Byte)); //set newJ0Byte to ‘ ’
	for (len = 0; len < 16; len++) {
		addr = RC7880_ADDR + RC7880REG_NEWJ0_RCV + vc4Id * 0x0200 + len;
		tempData = readRc7880RegByte(addr);
		newJ0Byte[len] = tempData;	//get register to newJ0Byte
	}

	RC7880DrvWriteNewJxBytes(overHeadP->nj0, newJ0Byte, 16); //translate to nj0 noCRC

	addr = RC7880_ADDR + RC7880REG_LPORT_BASEADDR(vc4Id) + RC7880REG_C2_RCV;
	tempData = readRc7880RegByte(addr);
	overHeadP->c2 = tempData;
	addr = RC7880_ADDR + RC7880REG_LPORT_BASEADDR(vc4Id) + RC7880REG_K3_RCV;
	tempData = readRc7880RegByte(addr);
	overHeadP->k3 = tempData;
	addr = RC7880_ADDR + RC7880REG_LPORT_BASEADDR(vc4Id) + RC7880REG_N1_RCV;
	tempData = readRc7880RegByte(addr);
	overHeadP->n1 = tempData;
	return RC7880_OK;
}

int RC7880DrvVC4UnitSendS1Write( BYTE vc4Id, BYTE sendS1) {
	WORD addr;
	BYTE tempData = 0;

	if ((vc4Id != 0) && (vc4Id != 1)) {
		return RC7880_ERROR;
	}
	addr = RC7880_ADDR + RC7880REG_LPORT_BASEADDR(vc4Id) + RC7880REG_S1_SEND;
	tempData = sendS1;
	if (writeRc7880RegByte(addr, tempData) == RC7880_ERROR) {
		return RC7880_ERROR;
	}
	return RC7880_OK;
}

int RC7880DrvVC4Unit16BytsJ1Read(BYTE vc4Id, BYTE *sendJ1P, BYTE *expectJ1P,
		BYTE *rcvJ1P) {
	WORD addr;
	BYTE len;
	BYTE newJ0Byte[16];

	if (((vc4Id != 0) && (vc4Id != 1)) || (sendJ1P == RC7880_NULL)
			|| (expectJ1P == RC7880_NULL) || (rcvJ1P == RC7880_NULL)) {
		return RC7880_ERROR;
	}
	for (len = 0; len < 16; len++) {
		addr = RC7880_ADDR + RC7880REG_LPORT_BASEADDR(vc4Id) + RC7880REG_J1_SEND
				+ len;
		newJ0Byte[len] = readRc7880RegByte(addr);
	}
	memcpy(sendJ1P, newJ0Byte, 16);
	for (len = 0; len < 16; len++) {
		addr = RC7880_ADDR + RC7880REG_LPORT_BASEADDR(vc4Id)
				+ RC7880REG_J1_EXCEPT + len;
		newJ0Byte[len] = readRc7880RegByte(addr);
	}
	memcpy(expectJ1P, newJ0Byte, 16);
	for (len = 0; len < 16; len++) {
		addr = RC7880_ADDR + RC7880REG_LPORT_BASEADDR(vc4Id) + RC7880REG_J1_RCV
				+ len;
		newJ0Byte[len] = readRc7880RegByte(addr);
	}
	memcpy(rcvJ1P, newJ0Byte, 16);
	return RC7880_OK;
}

int RC7880DrvVC4Unit16BytsJ0Read(BYTE vc4Id, BYTE *sendJ0P, BYTE *expectJ0P,
		BYTE *rcvJ0P) {
	WORD addr;
	BYTE len;
	BYTE newJ0Byte[16];

	if (((vc4Id != 0) && (vc4Id != 1)) || (sendJ0P == RC7880_NULL)
			|| (expectJ0P == RC7880_NULL) || (rcvJ0P == RC7880_NULL)) {
		return RC7880_ERROR;
	}
	for (len = 0; len < 16; len++) {
		addr = RC7880_ADDR + RC7880REG_NEWJ0_SEND + vc4Id * 0x0200 + len;
		newJ0Byte[len] = readRc7880RegByte(addr);
	}
	memcpy(sendJ0P, newJ0Byte, 16);
	for (len = 0; len < 16; len++) {
		addr = RC7880_ADDR + RC7880REG_NEWJ0_EXCEPT + 0x200 * vc4Id + len;
		newJ0Byte[len] = readRc7880RegByte(addr);
	}
	memcpy(expectJ0P, newJ0Byte, 16);
	for (len = 0; len < 16; len++) {
		addr = RC7880_ADDR + RC7880REG_NEWJ0_RCV + vc4Id * 0x0200 + len;
		newJ0Byte[len] = readRc7880RegByte(addr);
	}
	memcpy(rcvJ0P, newJ0Byte, 16);
	return RC7880_OK;
}

int RC7880DrvVC4UnitExceptOverHeadWrite(
BYTE vc4Id, Vc4UnitExceptOverHead_t *overHeadP,
BYTE j0CrcEnable,
BYTE j1CrcEnable) {
	WORD addr;
	BYTE tempData = 0;
	BYTE len;
	BYTE newJ0Byte[16];
	BYTE jxLen = 0;

	if (((vc4Id != 0) && (vc4Id != 1)) || (overHeadP == RC7880_NULL)) {
		return RC7880_ERROR;
	}
	addr = RC7880_ADDR + RC7880REG_LPORT_BASEADDR(vc4Id) + RC7880REG_J0_EXCEPT;
	tempData = overHeadP->j0;
	if (writeRc7880RegByte(addr, tempData) == RC7880_ERROR) {
		return RC7880_ERROR;
	}
	jxLen = strlen((const char*) overHeadP->nj0);
	if (jxLen > 15) {
		jxLen = 15;
	}
	memset(newJ0Byte, 0x20, sizeof(newJ0Byte));
	if (gVc4OhJ0Expect[vc4Id] == 0) {
		RC7880DrvReadNewJxBytes(overHeadP->nj0, newJ0Byte, jxLen);
		if (j0CrcEnable != 1) {
			newJ0Byte[0] = 0x80;
		}
	} else {
		memcpy(newJ0Byte, overHeadP->nj0, 16);
	}
	for (len = 0; len < 16; len++) {
		addr = RC7880_ADDR + RC7880REG_NEWJ0_EXCEPT + 0x200 * vc4Id + len;
		tempData = newJ0Byte[len];
		if (writeRc7880RegByte(addr, tempData) == RC7880_ERROR) {
			return RC7880_ERROR;
		}
	}
	jxLen = strlen((const char*) overHeadP->j1);
	if (jxLen > 15) {
		jxLen = 15;
	}
	memset(newJ0Byte, 0x20, sizeof(newJ0Byte));
	if (gVc4OhJ1Expect[vc4Id] == 0) {
		RC7880DrvReadNewJxBytes(overHeadP->j1, newJ0Byte, jxLen);
		if (j1CrcEnable != 1) {
			newJ0Byte[0] = 0x80;
		}
	} else {
		memcpy(newJ0Byte, overHeadP->j1, 16);
	}
	for (len = 0; len < 16; len++) {
		addr = RC7880_ADDR + RC7880REG_LPORT_BASEADDR(vc4Id)
				+ RC7880REG_J1_EXCEPT + len;
		tempData = newJ0Byte[len];
		if (writeRc7880RegByte(addr, tempData) == RC7880_ERROR) {
			return RC7880_ERROR;
		}
	}
	addr = RC7880_ADDR + RC7880REG_LPORT_BASEADDR(vc4Id) + RC7880REG_C2_EXCEPT;
	tempData = overHeadP->c2;
	if (writeRc7880RegByte(addr, tempData) == RC7880_ERROR) {
		return RC7880_ERROR;
	}
	return RC7880_OK;
}

int RC7880DrvVC4UniteB1PerformRead(BYTE vc4Id, WORD *counterB1P) {
	WORD addr;
	BYTE tempData1 = 0;
	BYTE tempData2 = 0;

	if ((vc4Id > 1) || (counterB1P == RC7880_NULL)) {
		return RC7880_ERROR;
	}
	addr =
			RC7880_ADDR
					+ RC7880REG_LPORT_BASEADDR(vc4Id) + RC7880REG_PERFORM_B1L; /*B1*/
	tempData1 = readRc7880RegByte(addr);
	addr =
			RC7880_ADDR
					+ RC7880REG_LPORT_BASEADDR(vc4Id) + RC7880REG_PERFORM_B1H;
	tempData2 = readRc7880RegByte(addr);
	*counterB1P = ((tempData2 << 8) | (tempData1));
	return RC7880_OK;
}

int RC7880DrvVC4UnitPerformRead(
BYTE vc4Id, VC4UnitPerform_t *performP) {
	WORD addr;
	BYTE tempData1 = 0;
	BYTE tempData2 = 0;
#if 0
	addr = RC7880_ADDR + RC7880REG_LPORT_BASEADDR(vc4Id) + RC7880REG_PERFORM_B1L; /*B1*/
	tempData1 = readRc7880RegByte(addr);
	addr = RC7880_ADDR + RC7880REG_LPORT_BASEADDR(vc4Id) + RC7880REG_PERFORM_B1H;
	tempData2 = readRc7880RegByte(addr);
	performP->rsB1 = ((tempData2 << 8) |(tempData1));
#endif	/*yubo del 2009.4.26 for RS_EXC , RS_DEG*/
	addr =
			RC7880_ADDR
					+ RC7880REG_LPORT_BASEADDR(vc4Id) + RC7880REG_PERFORM_B2L; /*B2*/
	tempData1 = readRc7880RegByte(addr);
	addr =
			RC7880_ADDR
					+ RC7880REG_LPORT_BASEADDR(vc4Id) + RC7880REG_PERFORM_B2H;
	tempData2 = readRc7880RegByte(addr);
	performP->msB2 = ((tempData2 << 8) | (tempData1));
	addr =
			RC7880_ADDR
					+ RC7880REG_LPORT_BASEADDR(vc4Id) + RC7880REG_PERFORM_M1L; /*M1*/
	tempData1 = readRc7880RegByte(addr);
	addr =
			RC7880_ADDR
					+ RC7880REG_LPORT_BASEADDR(vc4Id) + RC7880REG_PERFORM_M1H;
	tempData2 = readRc7880RegByte(addr);
	performP->msRei = ((tempData2 << 8) | (tempData1));
	addr =
			RC7880_ADDR
					+ RC7880REG_LPORT_BASEADDR(vc4Id) + RC7880REG_PERFORM_B3L; /*B3*/
	tempData1 = readRc7880RegByte(addr);
	addr =
			RC7880_ADDR
					+ RC7880REG_LPORT_BASEADDR(vc4Id) + RC7880REG_PERFORM_B3H;
	tempData2 = readRc7880RegByte(addr);
	performP->hovcB3 = ((tempData2 << 8) | (tempData1));
	addr =
			RC7880_ADDR
					+ RC7880REG_LPORT_BASEADDR(vc4Id) + RC7880REG_PERFORM_G1L; /*G1*/
	tempData1 = readRc7880RegByte(addr);
	addr =
			RC7880_ADDR
					+ RC7880REG_LPORT_BASEADDR(vc4Id) + RC7880REG_PERFORM_G1H;
	tempData2 = readRc7880RegByte(addr);
	performP->hovcRei = ((tempData2 << 8) | (tempData1));
	addr =
			RC7880_ADDR
					+ RC7880REG_LPORT_BASEADDR(vc4Id) + RC7880REG_PERFORM_PJE; /*PJE*/
	tempData1 = readRc7880RegByte(addr);
	performP->hovcPje = tempData1;
	addr =
			RC7880_ADDR
					+ RC7880REG_LPORT_BASEADDR(vc4Id) + RC7880REG_PERFORM_NJE; /*NJE*/
	tempData1 = readRc7880RegByte(addr);
	performP->hovcNje = tempData1;
	return RC7880_OK;
}

int RC7880DrvTU12UnitPerformRead(
BYTE tu12Id, TU12UnitPerform_t *performP) {
	WORD addr;
	BYTE tempData1 = 0;
	BYTE tempData2 = 0;

	if ((tu12Id >= RC7880_MAXTU12) || (performP == RC7880_NULL)) {
		return RC7880_ERROR;
	}
	addr = RC7880_ADDR
			+ RC7880REG_TU12REG_BASEADDR(tu12Id) + RC7880REG_PERFORM_BIP2L(0); /*DropA :0 */
	tempData1 = readRc7880RegByte(addr);
	addr = RC7880_ADDR
			+ RC7880REG_TU12REG_BASEADDR(
					tu12Id) + RC7880REG_PERFORM_BIP2H_REIH(0);
	tempData2 = readRc7880RegByte(addr);
	performP->dropABIP2 = ((((tempData2 & 0xF0) >> 4) << 8) | (tempData1));
	addr = RC7880_ADDR
			+ RC7880REG_TU12REG_BASEADDR(tu12Id) + RC7880REG_PERFORM_REIL(0); /*DropA :0 */
	tempData1 = readRc7880RegByte(addr);
	addr = RC7880_ADDR
			+ RC7880REG_TU12REG_BASEADDR(
					tu12Id) + RC7880REG_PERFORM_BIP2H_REIH(0);
	tempData2 = readRc7880RegByte(addr);
	performP->dropAREI = (((tempData2 & 0x0F) << 8) | (tempData1));
	addr = RC7880_ADDR
			+ RC7880REG_TU12REG_BASEADDR(tu12Id) + RC7880REG_PERFORM_PJE_NJE(0); /*DropA :0 */
	tempData1 = readRc7880RegByte(addr);
	performP->dropAPJE = ((tempData1 & 0xF0) >> 4);
	performP->dropANJE = (tempData1 & 0x0F);

	addr = RC7880_ADDR
			+ RC7880REG_TU12REG_BASEADDR(tu12Id) + RC7880REG_PERFORM_BIP2L(1); /*DropB :0 */
	tempData1 = readRc7880RegByte(addr);
	addr = RC7880_ADDR
			+ RC7880REG_TU12REG_BASEADDR(
					tu12Id) + RC7880REG_PERFORM_BIP2H_REIH(1);
	tempData2 = readRc7880RegByte(addr);
	performP->dropBBIP2 = ((((tempData2 & 0xF0) >> 4) << 8) | (tempData1));
	addr = RC7880_ADDR
			+ RC7880REG_TU12REG_BASEADDR(tu12Id) + RC7880REG_PERFORM_REIL(1); /*DropB :0 */
	tempData1 = readRc7880RegByte(addr);
	addr = RC7880_ADDR
			+ RC7880REG_TU12REG_BASEADDR(
					tu12Id) + RC7880REG_PERFORM_BIP2H_REIH(1);
	tempData2 = readRc7880RegByte(addr);
	performP->dropBREI = (((tempData2 & 0x0F) << 8) | (tempData1));
	addr = RC7880_ADDR
			+ RC7880REG_TU12REG_BASEADDR(tu12Id) + RC7880REG_PERFORM_PJE_NJE(1); /*DropB :0 */
	tempData1 = readRc7880RegByte(addr);
	performP->dropBPJE = ((tempData1 & 0xF0) >> 4);
	performP->dropBNJE = (tempData1 & 0x0F);
	return RC7880_OK;
}

int RC7880DrvEOWUnitEOWReset(BYTE enable) {
	WORD addr;
	BYTE tempData = 0;
//	WORD	opDelay = 0 ;
//	int	result ;

	addr = RC7880_ADDR + RC7880REG_EOW_RESET;
	if (enable == 1) {
		tempData = 0xAA;
	} else {
		tempData = 0x55;
	}
	if (writeRc7880RegByte(addr, tempData) == RC7880_ERROR) {
		return RC7880_ERROR;
	}
	return RC7880_OK;
	/*
	 tempData = 0x55 ; 
	 result = writeRc7880RegByte(addr , tempData) ; 
	 if(result == RC7880_ERROR)
	 {
	 return	RC7880_ERROR ; 
	 }
	 for(opDelay = 0 ; opDelay < 2000 ; opDelay++) ;
	 tempData = 0xAA ; 
	 result = writeRc7880RegByte(addr , tempData) ; 
	 return result ;
	 */
}

int RC7880EowUnitHdlcTxEnableWrite(BYTE enable) {
	WORD addr;
	BYTE tempData = 0;

	addr = RC7880_ADDR + RC7880REG_EOW_HDLCEN;
	tempData = readRc7880RegByte(addr);
	if (enable == 1) /* HDLC Tx Enable*/
	{
		tempData |= 0x01;
	} else /* HDLC Tx Disable*/
	{
		tempData &= 0xFE;
	}
	if (writeRc7880RegByte(addr, tempData) == RC7880_ERROR) {
		return RC7880_ERROR;
	}
	return RC7880_OK;
}

/* AU4上行方向插入AIS*/
int RC7880AU4UnitForceAUAISSendWrite(BYTE vc4Id, BYTE sendAisEnable) {
	WORD addr;
	BYTE tempData = 0;

	if (vc4Id > 1) {
		return RC7880_ERROR;
	}
	addr = RC7880_ADDR
			+ RC7880REG_LPORT_BASEADDR(vc4Id) + RC7880REG_AU4AIS_BUS_TYPE;
	tempData = readRc7880RegByte(addr);
	if (sendAisEnable == MSAIS_ENABLE) {
		tempData |= 0x40;
	} else {
		tempData &= 0xBF;
	}
	if (writeRc7880RegByte(addr, tempData) == RC7880_ERROR) {
		return RC7880_ERROR;
	}
	return RC7880_OK;
}

/* MS下行接收方向强制插入AIS*/
int RC7880Vc4UnitForceMSAISSendWrite(BYTE vc4Id, BYTE sendAisEnable) {
	WORD addr;
	BYTE tempData = 0;

	if (vc4Id > 1) {
		return RC7880_ERROR;
	}
	addr = RC7880_ADDR + RC7880REG_LPORT_BASEADDR(vc4Id) + RC7880REG_J0_MODE;
	tempData = readRc7880RegByte(addr);
	if (sendAisEnable == MSAIS_ENABLE) {
		tempData |= 0x40;
	} else {
		tempData &= 0xBF;
	}
	if (writeRc7880RegByte(addr, tempData) == RC7880_ERROR) {
		return RC7880_ERROR;
	}
	return RC7880_OK;
}

int RC7880Vc4UnitForceMSAISSendRead(BYTE vc4Id, BYTE *sendAisEnableP) {
	WORD addr;
	BYTE tempData = 0;

	if ((sendAisEnableP == NULL) || (vc4Id > 1)) {
		return RC7880_ERROR;
	}
	addr = RC7880_ADDR + RC7880REG_LPORT_BASEADDR(vc4Id) + RC7880REG_J0_MODE;
	tempData = readRc7880RegByte(addr);
	if ((tempData & 0x40) == 0x40) {
		*sendAisEnableP = 1;
	} else {
		*sendAisEnableP = 0;
	}
	return RC7880_OK;
}

int RC7880Vc4UnitHpRdiSendEnableWrite(BYTE vc4Id, BYTE force, BYTE hpPlm,
		BYTE hpLom, BYTE hpUneq, BYTE hpTim,
		BYTE hpAis, BYTE hpExc, BYTE hpDeg) {
	WORD addr;
	BYTE tempData = 0;

	if (vc4Id > 1) {
		return RC7880_ERROR;
	}
	addr = RC7880_ADDR
			+ RC7880REG_LPORT_BASEADDR(vc4Id) + RC7880REG_ALMHPRDI_SEND;
	tempData = readRc7880RegByte(addr);
	if (force == HPRDI_ENABLE) {
		tempData |= 0x80;
	} else {
		tempData &= 0x7F;
	}
	if (hpPlm == HPRDI_ENABLE) {
		tempData |= 0x40;
	} else {
		tempData &= 0xBF;
	}
	if (hpLom == HPRDI_ENABLE) {
		tempData |= 0x20;
	} else {
		tempData &= 0xDF;
	}
	if (hpUneq == HPRDI_ENABLE) {
		tempData |= 0x10;
	} else {
		tempData &= 0xEF;
	}
	if (hpTim == HPRDI_ENABLE) {
		tempData |= 0x08;
	} else {
		tempData &= 0xF7;
	}
	if (hpAis == HPRDI_ENABLE) {
		tempData |= 0x04;
	} else {
		tempData &= 0xFB;
	}
	if (hpExc == HPRDI_ENABLE) {
		tempData |= 0x02;
	} else {
		tempData &= 0xFD;
	}
	if (hpDeg == HPRDI_ENABLE) {
		tempData |= 0x01;
	} else {
		tempData &= 0xFE;
	}
	if (writeRc7880RegByte(addr, tempData) == RC7880_ERROR) {
		return RC7880_ERROR;
	}
	return RC7880_OK;
}

int RC7880Vc4UnitMsAisWrite(BYTE vc4Id, BYTE msExc, BYTE msDeg) {
	WORD addr;
	BYTE tempData = 0;

	if (vc4Id > 1) {
		return RC7880_ERROR;
	}
	addr = RC7880_ADDR
			+ RC7880REG_LPORT_BASEADDR(vc4Id) + RC7880REG_ALMPROTECT_MS; /*MS_AIS*/
	tempData = readRc7880RegByte(addr);
	if (msExc == 1) {
		tempData |= 0x02;
	} else {
		tempData &= 0xFD;
	}
	if (msDeg == 1) {
		tempData |= 0x01;
	} else {
		tempData &= 0xFE;
	}
	if (writeRc7880RegByte(addr, tempData) == RC7880_ERROR) {
		return RC7880_ERROR;
	}
	return RC7880_OK;
}

int RC7880Vc4UnitHpAisForceWrite(BYTE vc4Id, BYTE aisEnable) {
	WORD addr;
	BYTE tempData = 0;

	if (vc4Id > 1) {
		return RC7880_ERROR;
	}
	addr = RC7880_ADDR
			+ RC7880REG_LPORT_BASEADDR(vc4Id) + RC7880REG_ALMPROTECT_HP; /*HP*/
	tempData = readRc7880RegByte(addr);
	tempData &= 0xBF;
	if (aisEnable == 1) /*enable HP AIS*/
	{
		tempData |= 0x80;
	} else /*disable*/
	{
		tempData &= 0x7F;
	}
	if (writeRc7880RegByte(addr, tempData) == RC7880_ERROR) {
		return RC7880_ERROR;
	}
	return RC7880_OK;
}

int RC7880Vc4UnitHpAisForceRead(BYTE vc4Id, BYTE *aisEnableP) {
	WORD addr;
	BYTE tempData = 0;

	if ((vc4Id > 1) || (aisEnableP == RC7880_NULL)) {
		return RC7880_ERROR;
	}
	addr = RC7880_ADDR
			+ RC7880REG_LPORT_BASEADDR(vc4Id) + RC7880REG_ALMPROTECT_HP; /*HP*/
	tempData = readRc7880RegByte(addr);
	if ((tempData & 0x80) == 0x80) /*enable HP AIS*/
	{
		*aisEnableP = 1;
	} else /*disable*/
	{
		*aisEnableP = 0;
	}
	return RC7880_OK;
}

/****************************************************
 * 函数名:      rc7880OptUnitHpAisEnableWrite 
 * 参数信息:    
 * [In]:          
 * [Out]:      
 * [In&Out]: 
 *返回值:         
 *函数描述:         
 *        
 ****************************************************/
int rc7880OptUnitHpAisEnableWrite(BYTE vc4Id, BYTE force, BYTE hpPlm,
		BYTE hpUneq, BYTE hpTim, BYTE hpAis, BYTE hpExc, BYTE hpDeg) {
	WORD addr;
	BYTE tempData = 0;

	if (vc4Id > 1) {
		return RC7880_ERROR;
	}
	addr = RC7880_ADDR
			+ RC7880REG_LPORT_BASEADDR(vc4Id) + RC7880REG_ALMPROTECT_HP;
	tempData = readRc7880RegByte(addr);
	if (force == HPRDI_ENABLE) {
		tempData |= 0x80;
	} else {
		tempData &= 0x7F;
	}
	if (hpPlm == HPRDI_ENABLE) {
		tempData |= 0x40;
	} else {
		tempData &= 0xBF;
	}
	if (hpUneq == HPRDI_ENABLE) {
		tempData |= 0x10;
	} else {
		tempData &= 0xEF;
	}
	if (hpTim == HPRDI_ENABLE) {
		tempData |= 0x08;
	} else {
		tempData &= 0xF7;
	}
	if (hpAis == HPRDI_ENABLE) {
		tempData |= 0x04;
	} else {
		tempData &= 0xFB;
	}
	if (hpExc == HPRDI_ENABLE) {
		tempData |= 0x02;
	} else {
		tempData &= 0xFD;
	}
	if (hpDeg == HPRDI_ENABLE) {
		tempData |= 0x01;
	} else {
		tempData &= 0xFE;
	}

	if (writeRc7880RegByte(addr, tempData) == RC7880_ERROR) {
		return RC7880_ERROR;
	}
	return RC7880_OK;
}

int RC7880Vc4UnitAlmProtectWrite(BYTE vc4Id, BYTE msExc, BYTE msDeg, BYTE hpPlm,
		BYTE hpExc, BYTE hpTim, BYTE hpUneq, BYTE hpDeg, BYTE hpAis) {
	WORD addr;
	BYTE tempData = 0;

	if (vc4Id > 1) {
		return RC7880_ERROR;
	}
	addr = RC7880_ADDR
			+ RC7880REG_LPORT_BASEADDR(vc4Id) + RC7880REG_ALMPROTECT_MS; /*MS_AIS*/
	tempData = readRc7880RegByte(addr);
	if (msExc == 1) {
		tempData |= 0x02;
	} else {
		tempData &= 0xFD;
	}
	if (msDeg == 1) {
		tempData |= 0x01;
	} else {
		tempData &= 0xFE;
	}
	if (writeRc7880RegByte(addr, tempData) == RC7880_ERROR) {
		return RC7880_ERROR;
	}
	addr = RC7880_ADDR
			+ RC7880REG_LPORT_BASEADDR(vc4Id) + RC7880REG_ALMPROTECT_HP; /*HP*/
	tempData = readRc7880RegByte(addr);
	tempData &= 0xBF;
	if (hpPlm == 1) /*HP_PLM*/
	{
		tempData |= 0x40;
	} else {
		tempData &= 0xBF;
	}
	if (hpUneq == 1) /*HP_UNEQ*/
	{
		tempData |= 0x10;
	} else {
		tempData &= 0xEF;
	}
	if (hpTim == 1) /*HP_TIM*/
	{
		tempData |= 0x08;
	} else {
		tempData &= 0xF7;
	}
	if (hpAis == 1) /*HP_Ais*/
	{
		tempData |= 0x04;
	} else {
		tempData &= 0xFB;
	}

	if (hpExc == 1) /*HP_EXC*/
	{
		tempData |= 0x02;
	} else {
		tempData &= 0xFD;
	}
	if (hpDeg == 1) /*HP_Deg*/
	{
		tempData |= 0x01;
	} else {
		tempData &= 0xFE;
	}
	if (writeRc7880RegByte(addr, tempData) == RC7880_ERROR) {
		return RC7880_ERROR;
	}
	return RC7880_OK;
}

int RC7880Tu12UnitAlmProtectWrite(BYTE lpPlm, BYTE lpTim, BYTE lpUneq) {
	WORD addr;
	BYTE tempData = 0;

	addr = RC7880_ADDR + RC7880REG_ALMPROTECT_LP;
	tempData = readRc7880RegByte(addr);
	if (lpPlm == 1) /*LP_PLM*/
	{
		tempData |= 0x10;
	} else {
		tempData &= 0xF7;
	}
	if (lpTim == 1) /*LP_TIM*/
	{
		tempData |= 0x20;
	} else {
		tempData &= 0xDF;
	}
	if (lpTim == 1) /*LP_UNEQ*/
	{
		tempData |= 0x40;
	} else {
		tempData &= 0xBF;
	}
	if (writeRc7880RegByte(addr, tempData) == RC7880_ERROR) {
		return RC7880_ERROR;
	}
	return RC7880_OK;
}

int RC7880Vc4UnitBusTypeWrite(BYTE vc4Type, BYTE tug1Type, BYTE tug2Type,
		BYTE tug3Type) {
	WORD addr;
	BYTE tempData = 0;

	addr = RC7880_ADDR + RC7880REG_BUS_TYPE;
	tempData = readRc7880RegByte(addr);
	tempData &= 0xF0;
	if (vc4Type == BUS_VC4) {
		tempData |= 0x08;
	} else {
		/*TUG1*/
		if (tug1Type == BUS_TUG3) {
			tempData |= 0x04;
		} else if (tug1Type != BUS_TU12) {
			return RC7880_ERROR;
		}
		/*TUG2*/
		if (tug2Type == BUS_TUG3) {
			tempData |= 0x02;
		} else if (tug2Type != BUS_TU12) {
			return RC7880_ERROR;
		}
		/*TUG3*/
		if (tug3Type == BUS_TUG3) {
			tempData |= 0x01;
		} else if (tug3Type != BUS_TU12) {
			return RC7880_ERROR;
		}
	}
	if (writeRc7880RegByte(addr, tempData) == RC7880_ERROR) {
		return RC7880_ERROR;
	}
	return RC7880_OK;
}

int RC7880Vc4UnitUNEQInsWrite(BYTE vc4Id, BYTE offset, BYTE inData) {
	WORD addr;
	BYTE tempData = 0;

	addr = RC7880_ADDR + RC7880REG_LPORT_BASEADDR(vc4Id) + offset;
	if (offset < RC7880REG_UNEQ_ENDADDR) {
		tempData = inData;
	} else if (offset == RC7880REG_UNEQ_ENDADDR) {
		tempData = readRc7880RegByte(addr);
		tempData &= 0x80;
		tempData |= (inData & 0x7F);
	}
	if (writeRc7880RegByte(addr, tempData) == RC7880_ERROR) {
		return RC7880_ERROR;
	}
	return RC7880_OK;
}

int RC7880SecUnitT2T3T4Write(BYTE t2t3t4Cfg) {
	WORD addr;
	BYTE tempData = 0;

	addr = RC7880_ADDR + RC7880REG_SEC_T2T3T4;
	tempData = t2t3t4Cfg;
	if (writeRc7880RegByte(addr, tempData) == RC7880_ERROR) {
		return RC7880_ERROR;
	}
	return RC7880_OK;
}
int RC7880SecUnitT2T3T4Read(BYTE* t2t3t4ValueP) {
	WORD addr;
	BYTE tempData = 0;

	addr = RC7880_ADDR + RC7880REG_SEC_T2T3T4;
	tempData = readRc7880RegByte(addr);
	*t2t3t4ValueP = tempData;
	return RC7880_OK;
}
int RC7880SecUnitT41SrcWrite(BYTE t41Src) {
	WORD addr;
	BYTE tempData = 0;

	addr = RC7880_ADDR + RC7880REG_SEC_T41SRC;
	tempData = readRc7880RegByte(addr);
	tempData &= 0xF3;
	tempData |= t41Src;
	if (writeRc7880RegByte(addr, tempData) == RC7880_ERROR) {
		return RC7880_ERROR;
	}
	return RC7880_OK;
}

int RC7880SecUnitT41SSMEnableWrite(BYTE ssmEnable) {
	WORD addr;

	addr = RC7880_ADDR + RC7880REG_SEC_T41SSM;
	if (writeRc7880RegByte(addr, ssmEnable) == RC7880_ERROR) {
		return RC7880_ERROR;
	}
	return RC7880_OK;
}

int RC7880SecUnitDPLL1intRead(BYTE *modeP) {
	WORD addr;
	BYTE tempData = 0;

	addr = RC7880_ADDR + RC7880REG_SEC_DPLL1;
	tempData = readRc7880RegByte(addr);
	*modeP = (tempData & 0x03);
	return RC7880_OK;
}

int RC7880SecUnitFreqintRead(WORD *freqP) {
	WORD addr;
	BYTE tempData = 0;

	*freqP = 0;
	addr = RC7880_ADDR + RC7880REG_SEC_FREQH;
	tempData = readRc7880RegByte(addr);
	*freqP = tempData << 8;
	addr = RC7880_ADDR + RC7880REG_SEC_FREQL;
	tempData = readRc7880RegByte(addr);
	*freqP |= tempData;
	return RC7880_OK;
}

int RC7880SecUnitOverFreqWrite(BYTE modeP) {
	WORD addr;
	BYTE tempData = 0;
	int result;

	addr = RC7880_ADDR + RC7880REG_SEC_FREQ;
	tempData = (modeP && 0x60);
	result = writeRc7880RegByte(addr, tempData);
	return result;
}

int RC7880SecUnitT0ModeRead(BYTE *modeP) {
	WORD addr;
	BYTE tempData = 0;

	addr = RC7880_ADDR + RC7880REG_SEC_T0SOURCE;
	tempData = readRc7880RegByte(addr);
	*modeP = (tempData & 0x60);
	return RC7880_OK;
}

int RC7880SecUnitT0SourceRead(BYTE *sourceP) {
	WORD addr;
	BYTE tempData = 0;

	addr = RC7880_ADDR + RC7880REG_SEC_T0SOURCE;
	tempData = readRc7880RegByte(addr);
	*sourceP = tempData & 0x0F;
	return RC7880_OK;
}

/*
 * mode 0&1: auto, 2:freerun, 3: hold
 */
int RC7880SecUnitT0SourceWrite(BYTE mode, BYTE clockSrc) {
	WORD addr;
	BYTE tempData = 0;
	int result;

	addr = RC7880_ADDR + RC7880REG_SEC_T0SOURCE;
	tempData = (mode | clockSrc);
	result = writeRc7880RegByte(addr, tempData);
	return result;
}

int RC7880SecUnitFreqWrite(BYTE cfgData) {
	WORD addr;
	BYTE tempData = 0;
	int result;

	addr = RC7880_ADDR + RC7880REG_SEC_FREQ;
	tempData = cfgData;
	result = writeRc7880RegByte(addr, tempData);
	return result;
}

int RC7880SecUnitT21QLRead(BYTE *qlP) {
	WORD addr;
	BYTE tempData = 0;

	addr = RC7880_ADDR + RC7880REG_SEC_T21QL;
	tempData = readRc7880RegByte(addr);
	*qlP = ((tempData >> 4) & 0x0F);
	return RC7880_OK;
}

int RC7880SecUnitT31QLRead(BYTE *qlP) {
	WORD addr;
	BYTE tempData = 0;

	addr = RC7880_ADDR + RC7880REG_SEC_T31QL;
	tempData = readRc7880RegByte(addr);
	*qlP = ((tempData >> 4) & 0x0F);
	return RC7880_OK;
}
/*
 int	RC7880SecUnitT32QLRead(BYTE *qlP)
 {
 WORD	addr ;
 BYTE	tempData = 0 ;	

 addr = RC7880_ADDR + RC7880REG_SEC_T31QL ;
 tempData = readRc7880RegByte(addr) ; 
 *qlP = (tempData  & 0x0F) ;
 return RC7880_OK ;
 }

 int	RC7880SecUnitT32QLRead(BYTE *qlP)
 {
 WORD	addr ;
 BYTE	tempData = 0 ;	

 addr = RC7880_ADDR + RC7880REG_SEC_T31QL ;
 tempData = readRc7880RegByte(addr) ; 
 *qlP = (tempData  & 0x0F) ;
 return RC7880_OK ;
 }
 */
int RC7880SecUnitT41ASelectWrite(BYTE t41Source) {
	WORD addr;
	BYTE tempData = 0;

	addr = RC7880_ADDR + RC7880REG_SEC_A_SELCET;
	tempData = readRc7880RegByte(addr);
	t41Source <<= 3;
	if ((tempData & 0x0c) == t41Source)
		return RC7880_OK;
	if (writeRc7880RegByte(addr, t41Source) == RC7880_ERROR) {
		return RC7880_ERROR;
	}
	return RC7880_OK;
}

int RC7880SecUnitT2xSSMEnableRead(BYTE t2x, BYTE *enableP) {
	WORD addr;
	BYTE tempData = 0;

	if (((t2x != 0) && (t2x != 1)) || (enableP == RC7880_NULL)) {
		return RC7880_ERROR;
	}
	addr = RC7880_ADDR + RC7880REG_SEC_T2T3T4;
	tempData = readRc7880RegByte(addr);
	if ((tempData & (0x80 >> t2x)) == 0) {
		*enableP = SSM_ENABLE;
	} else {
		*enableP = SSM_DISABLE;
	}
	return RC7880_OK;
}

int RC7880SecUnitT3xSSMEnableRead(BYTE t3x, BYTE *enableP) {
	WORD addr;
	BYTE tempData = 0;

	if (((t3x != 0) && (t3x != 1)) || (enableP == RC7880_NULL)) {
		return RC7880_ERROR;
	}
	addr = RC7880_ADDR + RC7880REG_SEC_T2T3T4;
	tempData = readRc7880RegByte(addr);
	if ((tempData & (0x30 >> t3x)) == 0) {
		*enableP = SSM_ENABLE;
	} else {
		*enableP = SSM_DISABLE;
	}
	return RC7880_OK;
}

int RC7880SecUnitREFLOST1xRead(BYTE t1x, BYTE *losP) {
	WORD addr;
	BYTE tempData = 0;

	if (((t1x != 0) && (t1x != 1)) || (losP == RC7880_NULL)) {
		return RC7880_ERROR;
	}
	addr = RC7880_ADDR + RC7880REG_SEC_REFLOST1;
	tempData = readRc7880RegByte(addr);
	if (t1x == 0) /*T11*/
	{
		tempData = (tempData >> 7);
	} else /*T12*/
	{
		tempData = (tempData >> 6);
	}
	*losP = (tempData & 0x01);
	return RC7880_OK;
}

int RC7880SecUnitREFReg1LOSRead(BYTE *losP) {
	WORD addr;
	BYTE tempData = 0;

	if (losP == RC7880_NULL) {
		return RC7880_ERROR;
	}
	addr = RC7880_ADDR + RC7880REG_SEC_REFLOST1;
	tempData = readRc7880RegByte(addr);
	*losP = (tempData & 0xF0);
	return RC7880_OK;
}

int RC7880SecUnitREFLOST2T3Read(BYTE tx, BYTE *losP) {
	WORD addr;
	BYTE tempData = 0;

	if (((tx != 0) && (tx != 1)) || (losP == RC7880_NULL)) {
		return RC7880_ERROR;
	}
	addr = RC7880_ADDR + RC7880REG_SEC_REFLOST2T3;
	tempData = readRc7880RegByte(addr);
	if (tx == 0) /*T21*/
	{
		tempData = (tempData >> 7);
	} else /*T31*/
	{
		tempData = (tempData >> 5);
	}
	*losP = (tempData & 0x01);
	return RC7880_OK;
}

int RC7880SecUnitREFReg2LOSRead(BYTE *losP) {
	WORD addr;
	BYTE tempData = 0;

	if (losP == RC7880_NULL) {
		return RC7880_ERROR;
	}
	addr = RC7880_ADDR + RC7880REG_SEC_REFLOST2T3;
	tempData = readRc7880RegByte(addr);
	*losP = tempData;
	return RC7880_OK;
}

int RC7880SecUnitFreqErrintRead(BYTE clockSrc, BYTE *freqP) {
	WORD addr;
	BYTE tempData = 0;
	WORD delay = 0;

	*freqP = 0;
	if ((clockSrc > 7) || (clockSrc == 5) || (freqP == RC7880_NULL)) {
		return RC7880_ERROR;
	}
	addr = RC7880_ADDR + RC7880REG_SEC_FREQ2CTRL;
	tempData = clockSrc;
	if (writeRc7880RegByte(addr, tempData) == RC7880_ERROR) {
		return RC7880_ERROR;
	}
	for (delay = 0; delay < 2000; delay++)
		;
	addr = RC7880_ADDR + RC7880REG_SEC_FREQint;
	tempData = readRc7880RegByte(addr);
	if ((tempData & 0x18) == 0x18) {
		*freqP = 1;
	}
	return RC7880_OK;
}

int RC7880SecUnitT21SrcWrite(BYTE e1Id) {
	WORD addr;
	BYTE tempData = 0;

	if (e1Id > 23) {
		return RC7880_ERROR;
	}
	addr = RC7880_ADDR + RC7780REG_SEC_T21SRC;
	tempData = e1Id;
	if (writeRc7880RegByte(addr, tempData) == RC7880_ERROR) {
		return RC7880_ERROR;
	}
	return RC7880_OK;
}

int RC7880Vc4UnitS1RcvRead(BYTE vc4Id, BYTE *rcvS1P) {
	WORD addr;
	BYTE tempData = 0;

	if (((vc4Id != 0) && (vc4Id != 1)) || (rcvS1P == RC7880_NULL)) {
		return RC7880_ERROR;
	}
	addr = RC7880_ADDR + RC7880REG_LPORT_BASEADDR(vc4Id) + RC7880REG_S1_RCV;
	tempData = readRc7880RegByte(addr);
	*rcvS1P = tempData;
	return RC7880_OK;
}

int RC7880Vc4UnitJ0TestEnableWrite(BYTE vc4Id, BYTE enable) {
	WORD addr;
	BYTE tempData = 0;
	int result;

	if ((vc4Id != 0) && (vc4Id != 1)) {
		return RC7880_ERROR;
	}
	addr = RC7880_ADDR
			+ RC7880REG_LPORT_BASEADDR(vc4Id) + RC7880REG_ALMPROTECT_MS;
	tempData = readRc7880RegByte(addr);
	if (enable == 1/*ENABLE_J1TEST*/) {
		tempData |= 0x40;
	} else {
		tempData &= 0xBF;
	}
	result = writeRc7880RegByte(addr, tempData);
	return result;
}

int RC7880Vc4UnitJ1TestEnableWrite(BYTE vc4Id, BYTE enable) {
	WORD addr;
	BYTE tempData = 0;
	int result;

	if ((vc4Id != 0) && (vc4Id != 1)) {
		return RC7880_ERROR;
	}
	addr = RC7880_ADDR
			+ RC7880REG_LPORT_BASEADDR(vc4Id) + RC7880REG_OVERHEAD_CFG;
	tempData = readRc7880RegByte(addr);
	if (enable == 1 /*ENABLE_J1TEST*/) {
		tempData |= 0x80;
	} else {
		tempData &= 0x7F;
	}
	result = writeRc7880RegByte(addr, tempData);
	return result;
}

int RC7880Vc4UnitBIP3CounterModeWrite(BYTE vc4Id, BYTE mode) {
	WORD addr;
	BYTE tempData = 0;
	int result;

	if ((vc4Id != 0) && (vc4Id != 1)) {
		return RC7880_ERROR;
	}
	addr = RC7880_ADDR
			+ RC7880REG_LPORT_BASEADDR(vc4Id) + RC7880REG_OVERHEAD_CFG;
	tempData = readRc7880RegByte(addr);
	if (mode == 1) /*Block*/
	{
		tempData |= 0x08;
	} else /*Bit*/
	{
		tempData &= 0xF7;
	}
	result = writeRc7880RegByte(addr, tempData);
	return result;
}

int RC7880Tu12UnitTsSelectWrite(BYTE tu12Id, BYTE select) {
	WORD addr;
	BYTE tempData = 0;
	int result;

	if (select > 63) {
		return RC7880_ERROR;
	}
	addr = RC7880_ADDR
			+ RC7880REG_TU12REG_BASEADDR(tu12Id) + RC7880REG_TS_SELECT;
	tempData = select;
	result = writeRc7880RegByte(addr, tempData);
	return result;
}

int RC7880Tu12UnitTsSelectRead(BYTE tu12Id, BYTE *selectP) {
	WORD addr;
	BYTE tempData = 0;

	if (selectP == NULL) {
		return RC7880_ERROR;
	}
	addr = RC7880_ADDR
			+ RC7880REG_TU12REG_BASEADDR(tu12Id) + RC7880REG_TS_SELECT;
	tempData = readRc7880RegByte(addr);
	*selectP = tempData;
	return RC7880_OK;
}

int RC7880Tu12UnitTsSelectintRead(BYTE tu12Id, BYTE *intP) {
	WORD addr;
	BYTE tempData = 0;

	if (intP == NULL) {
		return RC7880_ERROR;
	}
	addr = RC7880_ADDR
			+ RC7880REG_TU12REG_BASEADDR(tu12Id) + RC7880REG_RC7880E1_CONFIG;
	tempData = readRc7880RegByte(addr);
	*intP = (tempData & 0x40) >> 6;
	return RC7880_OK;
}

int RC7880Tu12UnitTu12LoopWrite(BYTE tu12Id, BYTE lineLoop, BYTE devLoop) {
	WORD addr;
	BYTE tempData = 0;
	int result;

	if ((lineLoop > 1) || (devLoop > 1)) {
		return RC7880_ERROR;
	}
	addr = RC7880_ADDR
			+ RC7880REG_TU12REG_BASEADDR(tu12Id) + RC7880REG_RC7880E1_CONFIG;
	tempData = readRc7880RegByte(addr);
	if (lineLoop == 1) /*out Loop*/
	{
		tempData |= 0x01;
		tempData |= 0x08; /*insert AIS*/
	} else {
		tempData &= 0xF6;
	}
	if (devLoop == 1) /*inside Loop*/
	{
		tempData |= 0x02;
		tempData |= 0x04; /*insert AIS*/
	} else {
		tempData &= 0xF9;
	}
	if ((devLoop == 1) && (lineLoop == 1)) {
		tempData &= 0xF3;
	}
	result = writeRc7880RegByte(addr, tempData);
	return result;
}

int RC7880Tu12UnitTu12LoopRead(BYTE tu12Id, BYTE *lineLoopP, BYTE *e1LoopP) {
	WORD addr;
	BYTE tempData = 0;

	if ((e1LoopP == NULL)) {
		return RC7880_ERROR;
	}
	addr = RC7880_ADDR
			+ RC7880REG_TU12REG_BASEADDR(tu12Id) + RC7880REG_RC7880E1_CONFIG;
	tempData = readRc7880RegByte(addr);
	if ((tempData & 0x02) == 2) {
		*e1LoopP = 1;
	} else {
		*e1LoopP = 0;
	}
	if ((tempData & 0x01) == 1) {
		*lineLoopP = 1;
	} else {
		*lineLoopP = 0;
	}
	return RC7880_OK;
}

/*
 *	功能: 选择G H总线中VC12保护模式
 *	参数: tu12Id 0~23
 *		  protectMode AUTO_PROTECT
 *		  	          MANUAL_PROTECT
 *		  	          DISABLE_PROTECT
 */

int RC7880Tu12UnitProtectModeWrite(BYTE tu12Id,
		BYTE protectMode /*, BYTE startFlag*/) {
	WORD addr;
	BYTE tempData = 0;
	BYTE tempData2 = 0;
	int result = RC7880_OK;

	if ((protectMode != AUTO_PROTECT) && (protectMode != MANUAL_PROTECT)
			&& (protectMode != DISABLE_PROTECT)) {
		return RC7880_ERROR;
	}
	addr = RC7880_ADDR
			+ RC7880REG_TU12REG_BASEADDR(tu12Id) + RC7880REG_TS_PROTECT;
	tempData = readRc7880RegByte(addr);
	tempData2 = tempData;
	if (protectMode == AUTO_PROTECT) {
		tempData2 &= 0xFB; /*clear force expect */
		tempData2 &= 0xE7;
	} else if (protectMode == MANUAL_PROTECT) {
		tempData2 |= 0x18;
		if ((tempData & 0x01) == 0x01) /*B*/
		{
			tempData2 |= 0x02; /*B*/
		} else /*A*/
		{
			tempData2 &= 0xFD; /*A*/
		}
	} else if (protectMode == DISABLE_PROTECT) {
		tempData2 &= 0xE7;
		tempData2 |= 0x08;
	}
	if (tempData2 != tempData) {
		result = writeRc7880RegByte(addr, tempData2);
	}
	return result;
}

int RC7880Tu12UnitBusConfigWrite(BYTE tu12Id, BYTE busId) {
	WORD addr;
	BYTE tempData = 0;
	BYTE tempData2 = 0;
	int result = RC7880_OK;

	if ((busId != VC4ID_A) && (busId != VC4ID_B)) {
		return RC7880_ERROR;
	}
	addr = RC7880_ADDR
			+ RC7880REG_TU12REG_BASEADDR(tu12Id) + RC7880REG_TS_PROTECT;
	tempData = readRc7880RegByte(addr);
	tempData2 = tempData;
	if (busId == VC4ID_A) {
		tempData2 &= 0xFD;
	} else {
		tempData2 |= 0x02;
	}
	if (tempData2 != tempData) {
		result = writeRc7880RegByte(addr, tempData2);
	}
	return result;
}

int RC7880Tu12UnitWorkBusRead(BYTE tu12Id, BYTE *busIdP) {
	WORD addr;
	BYTE tempData = 0;
	int result = RC7880_OK;

	if (busIdP == NULL) {
		return RC7880_ERROR;
	}
	addr = RC7880_ADDR
			+ RC7880REG_TU12REG_BASEADDR(tu12Id) + RC7880REG_TS_PROTECT;
	tempData = readRc7880RegByte(addr);
	if ((tempData & 0x01) == 0) {
		*busIdP = VC4ID_A;
	} else {
		*busIdP = VC4ID_B;
	}
	return result;
}

int RC7880Tu12UnitProtectToExceptBusWrite(BYTE tu12Id, BYTE protectMode,
		BYTE exceptBus) {
	WORD addr;
	BYTE tempData = 0;
	int result = RC7880_OK;

	if ((protectMode != AUTO_PROTECT) && (protectMode != MANUAL_PROTECT)) {
		return RC7880_ERROR;
	}
	addr = RC7880_ADDR
			+ RC7880REG_TU12REG_BASEADDR(tu12Id) + RC7880REG_TS_PROTECT;
	tempData = readRc7880RegByte(addr);
	tempData |= 0x1C;
	if (exceptBus == VC4ID_A) {
		tempData &= 0xFD;
	} else {
		tempData |= 0x02;
	}
	result = writeRc7880RegByte(addr, tempData);
	if (result == RC7880_ERROR) {
		return result;
	}
	tempData = readRc7880RegByte(addr);
	if (protectMode == AUTO_PROTECT) {
		tempData &= 0xE3;
	} else {
		tempData &= 0xE3;
		tempData |= 0x18;

	}
	result = writeRc7880RegByte(addr, tempData);
	return result;
}

int RC7880Tu12UnitLPRDIEnableWrite(BYTE tu12Id, BYTE lpRdiEnable) {
	WORD addr;
	BYTE tempData = 0;
	int result;

	addr = RC7880_ADDR
			+ RC7880REG_TU12REG_BASEADDR(tu12Id) + RC7880REG_LPRDI_ENABLE;
	tempData = readRc7880RegByte(addr);
	if (lpRdiEnable == LPRDI_ENABLE) {
		tempData &= 0xEF;
	} else {
		tempData |= 0x10;
	}
	result = writeRc7880RegByte(addr, tempData);
	return result;
}

int RC7880Tu12UnitV5SendWrite(BYTE tu12Id, BYTE sendData) {
	WORD addr;
	BYTE tempData = 0;
	int result;

	addr = RC7880_ADDR
			+ RC7880REG_TU12REG_BASEADDR(tu12Id) + RC7880REG_LPRDI_ENABLE;
	tempData = readRc7880RegByte(addr);
	tempData &= 0xF1;
	tempData |= (sendData & 0x0E);
	result = writeRc7880RegByte(addr, tempData);
	return result;
}

int RC7880Tu12V5ExpectWrite(BYTE tu12Id, BYTE v5Expect) {
	WORD addr;
	BYTE tempData = 0;
	int result;

	addr = RC7880_ADDR
			+ RC7880REG_TU12REG_BASEADDR(tu12Id) + RC7880REG_ALARM_BUSAV5EXPECT;
	tempData = (v5Expect & 0x0E);
	result = writeRc7880RegByte(addr, tempData);
//	addr = RC7880_ADDR + RC7880REG_TU12REG_BASEADDR(tu12Id) + RC7880REG_ALARM_BUSBV5EXPECT ;
//	tempData = (v5Expect & 0x0E) ;
//	result = writeRc7880RegByte(addr , tempData) ;
	return result;
}

int RC7880EOWUnitXE1AlarmRead(BYTE *alarmP, BYTE xE1Id) {
	WORD addr;
	BYTE tempData = 0;

	if ((alarmP == RC7880_NULL) || (xE1Id > 1)) {
		return RC7880_ERROR;
	}
	addr = RC7880_ADDR + RC7880REG_EOW_XE1ALARM + xE1Id;
	tempData = readRc7880RegByte(addr);
	*alarmP = tempData;
	return RC7880_OK;
}

int RC7880GlobalUnitAutoAlsEnableWrite(BYTE vc4Id, BYTE enable) {
	WORD addr;
	BYTE tempData = 0;
	int result = RC7880_OK;

	if ((vc4Id > 1) || (enable > 1)) {
		return RC7880_ERROR;
	}
	addr = RC7880_ADDR + RC7880REG_GLOBAL_ALS;
	tempData = readRc7880RegByte(addr);
	if (vc4Id == VC4ID_A) {
		if (enable == ALS_ENABLE) {
			tempData |= 0x20;
		} else {
			tempData &= 0xDF;
		}
	} else {
		if (enable == ALS_ENABLE) {
			tempData |= 0x10;
		} else {
			tempData &= 0xEF;
		}
	}
//	tempData &= 0xFC ;
	result = writeRc7880RegByte(addr, tempData);
	return result;
}

int RC7880GlobalUnitAlsModeWrite(BYTE mode) {
	WORD addr;
	BYTE tempData = 0;
	int result = RC7880_OK;

	if (mode > 1) {
		return RC7880_ERROR;
	}
	addr = RC7880_ADDR + RC7880REG_GLOBAL_ALS;
	tempData = readRc7880RegByte(addr);
	if (mode == ALS_SHORTMODE) {
		tempData |= 0x40;
	} else {
		tempData &= 0xBF;
	}
//	tempData &= 0xFC ;
	result = writeRc7880RegByte(addr, tempData);
	return result;
}

int RC7880GlobalUnitManualAlsWrite(BYTE vc4Id) {
	WORD addr;
	BYTE tempData = 0;
	WORD delay;
	int result = RC7880_OK;

	if (vc4Id > 1) {
		return RC7880_ERROR;
	}
	addr = RC7880_ADDR + RC7880REG_GLOBAL_ALS;
	tempData = readRc7880RegByte(addr);
	if (vc4Id == VC4ID_A) {
		tempData &= 0x77;
		if (writeRc7880RegByte(addr, tempData) == RC7880_ERROR) {
			return RC7880_ERROR;
		}
		for (delay = 0; delay < 1000; delay++)
			;
		tempData |= 0x08;
		tempData &= 0xFC;
		result = writeRc7880RegByte(addr, tempData);
	} else /*VC4ID_B*/
	{
		tempData &= 0x7B;
		if (writeRc7880RegByte(addr, tempData) == RC7880_ERROR) {
			return RC7880_ERROR;
		}
		for (delay = 0; delay < 1000; delay++)
			;
		tempData |= 0x04;
		tempData &= 0xFC;
		result = writeRc7880RegByte(addr, tempData);
	}
	return result;
}

int RC7880GlobalUnitAlsCov(BYTE vc4Id, BYTE cov) {
	WORD addr;
	BYTE tempData = 0;
//	WORD	delay ;
	int result = RC7880_OK;

	if (vc4Id > 1 || cov > 1) {
		return RC7880_ERROR;
	}
	addr = RC7880_ADDR + RC7880REG_GLOBAL_ALS;
	tempData = readRc7880RegByte(addr);
	if (vc4Id == VC4ID_A) {
		tempData &= ~(1 << 1);
		tempData |= (cov << 1);
	} else /*VC4ID_B*/
	{
		tempData &= ~(1 << 0);
		tempData |= (cov << 0);
	}
	if (writeRc7880RegByte(addr, tempData) == RC7880_ERROR) {
		return RC7880_ERROR;
	}
	return result;
}

int RC7880GlobalUnitAlsintRead(BYTE *enableAP, BYTE *enableBP, BYTE *modeP) {
	WORD addr;
	BYTE tempData = 0;

	addr = RC7880_ADDR + RC7880REG_GLOBAL_ALS;
	tempData = readRc7880RegByte(addr);
	*modeP = (tempData >> 6) & 0x01;
	*enableAP = (tempData >> 5) & 0x01;
	*enableBP = (tempData >> 4) & 0x01;
	return RC7880_OK;
}

int RC7880GlobalUnitCommnWrite(WORD addr, BYTE cfgData) {
	BYTE tempData = 0;
	int result;

	addr = RC7880_ADDR + addr;
	tempData = cfgData;
	result = writeRc7880RegByte(addr, tempData);
	return result;
}

int RC7880GlobalUnitCommnRead(WORD addr, BYTE *intP) {
	BYTE tempData = 0;

	addr = RC7880_ADDR + addr;
	tempData = readRc7880RegByte(addr);
	*intP = tempData;
	return RC7880_ERROR;
}

int RC7880Vc4UnitDxcConfigWrite(BYTE tu12Id, BYTE upSource) {
	WORD addr;
	BYTE tempData = 0;
	int result = RC7880_OK;

	addr = RC7880_ADDR + RC7880REG_DXC_ADD_TU12(tu12Id);
	tempData = readRc7880RegByte(addr);
	if (upSource == DXC_TRANSFER) {
		tempData &= 0xC7;
		tempData |= 0x30; /*AB*/
	}
//	else if(upSource == DXC_LOCAL)
//	{
//		tempData &= 0xC7 ;
//		tempData |= 0x10 ;		/*GH*/
//	}
	else if (upSource == DXC_LOOP) {
		tempData &= 0xC7;
		tempData |= 0x08; /*LOOP*/
	}
//	else if(upSource == DXC_CLOSE)
//	{
//		tempData &= 0xC7 ;		/*CD*/
//	}
	else if (upSource == DXC_LOCAL || upSource == DXC_CLOSE) {
		tempData &= 0xC7;
		tempData |= 0x20; /*GH OR CD*/
	} else {
		return RC7880_ERROR;
	}
	result = writeRc7880RegByte(addr, tempData);
	return result;
}

int Rc7880GlobalUnitRpdint(BYTE *rpdAP, BYTE *rpdBP) {
	WORD addr;
	BYTE tempData = 0;

	addr = RC7880_ADDR + RC7880REG_GLOBAL_RPD;
	tempData = readRc7880RegByte(addr);
	if ((tempData & 0x80) == 0x80) /*A*/
	{
		*rpdAP = ALARM_int;
	} else {
		*rpdAP = WORK_int;
	}

	if ((tempData & 0x40) == 0x40) /*B*/
	{
		*rpdBP = ALARM_int;
	} else {
		*rpdBP = WORK_int;
	}
	return RC7880_OK;
}

int RC7880BERUnitLocalErrCounterRead(WORD *counterP) {
	WORD addr;
	BYTE tempData = 0;
	WORD tempCounter = 0;

	addr = RC7880_ADDR + RC7880REG_BER_LCOUNTERH;
	tempData = readRc7880RegByte(addr);
	tempCounter = (tempData << 8);
	addr = RC7880_ADDR + RC7880REG_BER_LCOUNTERL;
	tempData = readRc7880RegByte(addr);
	tempCounter |= tempData;
	*counterP = tempCounter;
	return RC7880_OK;
}

int RC7880BERUnitRemoteErrCounterRead(WORD *counterP) {
	WORD addr;
	BYTE tempData = 0;
	WORD tempCounter = 0;

	addr = RC7880_ADDR + RC7880REG_BER_RCOUNTERH;
	tempData = readRc7880RegByte(addr);
	tempCounter = (tempData << 8);
	addr = RC7880_ADDR + RC7880REG_BER_RCOUNTERL;
	tempData = readRc7880RegByte(addr);
	tempCounter |= tempData;
	*counterP = tempCounter;
	return RC7880_OK;
}

int RC7880BERUnitAlarmintRead(BYTE *alarmP) {
	WORD addr;
	BYTE tempData = 0;

	addr = RC7880_ADDR + RC7880REG_BER_ALARM;
	tempData = readRc7880RegByte(addr);
	*alarmP = tempData;
	return RC7880_OK;
}

int RC7880BERUnitSendConfigWrite(BYTE enable, BYTE direct, BYTE e1Id) {
	WORD addr;
	BYTE tempData = 0;
	int result;

	if ((e1Id + 1) > RC7880_MAXTU12) {
		return RC7880_ERROR;
	}
	addr = RC7880_ADDR + RC7880REG_BER_SENDCFG;
	tempData = readRc7880RegByte(addr);
	tempData &= 0x20;
	tempData |= e1Id;
	if (enable == 1) {
		tempData |= 0x80;
	} else {
		tempData &= 0x7F;
	}
	if (direct == DIRECT_BUS) {
		tempData |= 0x40;
	} else if (direct == DIRECT_E1) {
		tempData &= 0xBF;
	} else {
		return RC7880_ERROR;
	}
	result = writeRc7880RegByte(addr, tempData);
	return result;
}

int RC7880BERUnitSendConfigRead(BYTE *enableP, BYTE *directP, BYTE *e1IdP) {
	WORD addr;
	BYTE tempData = 0;
	BYTE tempE1 = 0;

	addr = RC7880_ADDR + RC7880REG_BER_SENDCFG;
	tempData = readRc7880RegByte(addr);
	if ((tempData & 0x80) == 0x80) /*enable*/
	{
		*enableP = 1;
	} else {
		*enableP = 0;
	}
	if ((tempData & 0x40) == 0x40) /*Bus direct*/
	{
		*directP = 1;
	} else /*E1 direct*/
	{
		*directP = 0;
	}
	tempE1 = (tempData & 0x1F);
	if (tempE1 > 0x17) /*E1_23*/
	{
		return RC7880_ERROR;
	}
	*e1IdP = tempE1;
	return RC7880_OK;
}

int RC7880BERUnitRcvConfigWrite(BYTE enable, BYTE direct, BYTE frameMode,
		BYTE e1Id) {
	WORD addr;
	BYTE tempData = 0;
	int result;

	if ((e1Id + 1) > RC7880_MAXTU12) {
		return RC7880_ERROR;
	}
	addr = RC7880_ADDR + RC7880REG_BER_RCVCFG;
	tempData |= e1Id;
	if (enable == 1) {
		tempData |= 0x80;
	} else {
		tempData &= 0x7F;
	}
	if (direct == DIRECT_BUS) {
		tempData |= 0x40;
	} else if (direct == DIRECT_E1) {
		tempData &= 0xBF;
	} else {
		return RC7880_ERROR;
	}
	if (frameMode == FRAME_MODE) {
		tempData |= 0x20;
	} else if (frameMode == UNFRAME_MODE) {
		tempData &= 0xDF;
	} else {
		return RC7880_ERROR;
	}
	result = writeRc7880RegByte(addr, tempData);
	return result;
}

int RC7880BERUnitRcvConfigRead(BYTE *enableP, BYTE *directP, BYTE *frameModeP,
		BYTE *e1IdP) {
	WORD addr;
	BYTE tempData = 0;
	BYTE tempE1 = 0;

	addr = RC7880_ADDR + RC7880REG_BER_RCVCFG;
	tempData = readRc7880RegByte(addr);
	if ((tempData & 0x80) == 0x80) /*enable*/
	{
		*enableP = 1;
	} else {
		*enableP = 0;
	}
	if ((tempData & 0x40) == 0x40) /*Bus direct*/
	{
		*directP = 1;
	} else /*E1 direct*/
	{
		*directP = 0;
	}
	if ((tempData & 0x20) == 0x20) /*Frame*/
	{
		*frameModeP = 1;
	} else /*unFrame*/
	{
		*frameModeP = 0;
	}
	tempE1 = (tempData & 0x1F);
	if (tempE1 > 0x17) /*E1_23*/
	{
		return RC7880_ERROR;
	}
	*e1IdP = tempE1;
	return RC7880_OK;
}

int RC7880BERUnitInsertErrCodeWrite(void) {
	WORD addr;
	BYTE tempData = 0;
	WORD delay = 0;
	int result;

	addr = RC7880_ADDR + RC7880REG_BER_SENDCFG;
	tempData = readRc7880RegByte(addr);
	if ((tempData & 0x80) == 0) {
		return RC7880_ERROR;
	}
	tempData &= 0xDF;
	result = writeRc7880RegByte(addr, tempData);
	if (result == RC7880_ERROR) {
		return RC7880_ERROR;
	}
	for (delay = 0; delay < 255; delay++)
		;
	tempData |= 0x20;
	result = writeRc7880RegByte(addr, tempData);
	return result;
}

int RC7880XE1UnitXE1ConfigWrite(BYTE xE1Id, BYTE cfgData) {
	WORD addr;
	BYTE tempData = 0;
	int result;

	if (xE1Id > 1) {
		return RC7880_ERROR;
	}
	addr = RC7880_ADDR + RC7880REG_XE1_XE11CONFIG + xE1Id;
	if (cfgData == E1_MAPPER) {
		tempData = 0;
	} else if (cfgData == E1_CLOCK) {
		tempData = 2;
	} else if (cfgData == XE1_IN) {
		tempData = 5;
	} else if (cfgData == XE1_OUT) {
		tempData = 1;
	} else {
		return RC7880_ERROR;
	}
	result = writeRc7880RegByte(addr, tempData);
	return result;
}

int RC7880SecUnitT32QLRead(BYTE *qlP) {
	WORD addr;
	BYTE tempData = 0;

	addr = RC7880_ADDR + RC7880REG_SEC_T31QL;
	tempData = readRc7880RegByte(addr);
	*qlP = (tempData & 0x0F);
	return RC7880_OK;
}

/*
 * 开启或关闭APS1 APS3 同时操作
 */
// int RC7880GlobalUnitPortProtectWrite(BYTE enable) {
// }
